{"version":3,"file":"vendor-BoAMWkBe.js","sources":["../../node_modules/lightgallery/lightgallery.es5.js","../../node_modules/lightgallery/plugins/zoom/lg-zoom.es5.js","../../node_modules/lightgallery/plugins/thumbnail/lg-thumbnail.es5.js"],"sourcesContent":["/*!\n * lightgallery | 2.9.0 | October 1st 2025\n * http://www.lightgalleryjs.com/\n * Copyright (c) 2020 Sachin Neravath;\n * @license GPLv3\n */\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\n\n/**\r\n * List of lightGallery events\r\n * All events should be documented here\r\n * Below interfaces are used to build the website documentations\r\n * */\r\nvar lGEvents = {\r\n    afterAppendSlide: 'lgAfterAppendSlide',\r\n    init: 'lgInit',\r\n    hasVideo: 'lgHasVideo',\r\n    containerResize: 'lgContainerResize',\r\n    updateSlides: 'lgUpdateSlides',\r\n    afterAppendSubHtml: 'lgAfterAppendSubHtml',\r\n    beforeOpen: 'lgBeforeOpen',\r\n    afterOpen: 'lgAfterOpen',\r\n    slideItemLoad: 'lgSlideItemLoad',\r\n    beforeSlide: 'lgBeforeSlide',\r\n    afterSlide: 'lgAfterSlide',\r\n    posterClick: 'lgPosterClick',\r\n    dragStart: 'lgDragStart',\r\n    dragMove: 'lgDragMove',\r\n    dragEnd: 'lgDragEnd',\r\n    beforeNextSlide: 'lgBeforeNextSlide',\r\n    beforePrevSlide: 'lgBeforePrevSlide',\r\n    beforeClose: 'lgBeforeClose',\r\n    afterClose: 'lgAfterClose',\r\n    rotateLeft: 'lgRotateLeft',\r\n    rotateRight: 'lgRotateRight',\r\n    flipHorizontal: 'lgFlipHorizontal',\r\n    flipVertical: 'lgFlipVertical',\r\n    autoplay: 'lgAutoplay',\r\n    autoplayStart: 'lgAutoplayStart',\r\n    autoplayStop: 'lgAutoplayStop',\r\n};\n\nvar lightGalleryCoreSettings = {\r\n    mode: 'lg-slide',\r\n    easing: 'ease',\r\n    speed: 400,\r\n    licenseKey: '0000-0000-000-0000',\r\n    height: '100%',\r\n    width: '100%',\r\n    addClass: '',\r\n    startClass: 'lg-start-zoom',\r\n    backdropDuration: 300,\r\n    container: '',\r\n    startAnimationDuration: 400,\r\n    zoomFromOrigin: true,\r\n    hideBarsDelay: 0,\r\n    showBarsAfter: 10000,\r\n    slideDelay: 0,\r\n    supportLegacyBrowser: true,\r\n    allowMediaOverlap: false,\r\n    videoMaxSize: '1280-720',\r\n    loadYouTubePoster: true,\r\n    defaultCaptionHeight: 0,\r\n    ariaLabelledby: '',\r\n    ariaDescribedby: '',\r\n    resetScrollPosition: true,\r\n    hideScrollbar: false,\r\n    closable: true,\r\n    swipeToClose: true,\r\n    closeOnTap: true,\r\n    showCloseIcon: true,\r\n    showMaximizeIcon: false,\r\n    loop: true,\r\n    escKey: true,\r\n    keyPress: true,\r\n    trapFocus: true,\r\n    controls: true,\r\n    slideEndAnimation: true,\r\n    hideControlOnEnd: false,\r\n    mousewheel: false,\r\n    getCaptionFromTitleOrAlt: true,\r\n    appendSubHtmlTo: '.lg-sub-html',\r\n    subHtmlSelectorRelative: false,\r\n    preload: 2,\r\n    numberOfSlideItemsInDom: 10,\r\n    selector: '',\r\n    selectWithin: '',\r\n    nextHtml: '',\r\n    prevHtml: '',\r\n    index: 0,\r\n    iframeWidth: '100%',\r\n    iframeHeight: '100%',\r\n    iframeMaxWidth: '100%',\r\n    iframeMaxHeight: '100%',\r\n    download: true,\r\n    counter: true,\r\n    appendCounterTo: '.lg-toolbar',\r\n    swipeThreshold: 50,\r\n    enableSwipe: true,\r\n    enableDrag: true,\r\n    dynamic: false,\r\n    dynamicEl: [],\r\n    extraProps: [],\r\n    exThumbImage: '',\r\n    isMobile: undefined,\r\n    mobileSettings: {\r\n        controls: false,\r\n        showCloseIcon: false,\r\n        download: false,\r\n    },\r\n    plugins: [],\r\n    strings: {\r\n        closeGallery: 'Close gallery',\r\n        toggleMaximize: 'Toggle maximize',\r\n        previousSlide: 'Previous slide',\r\n        nextSlide: 'Next slide',\r\n        download: 'Download',\r\n        playVideo: 'Play video',\r\n        mediaLoadingFailed: 'Oops... Failed to load content...',\r\n    },\r\n};\n\nfunction initLgPolyfills() {\r\n    (function () {\r\n        if (typeof window.CustomEvent === 'function')\r\n            return false;\r\n        function CustomEvent(event, params) {\r\n            params = params || {\r\n                bubbles: false,\r\n                cancelable: false,\r\n                detail: null,\r\n            };\r\n            var evt = document.createEvent('CustomEvent');\r\n            evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\r\n            return evt;\r\n        }\r\n        window.CustomEvent = CustomEvent;\r\n    })();\r\n    (function () {\r\n        if (!Element.prototype.matches) {\r\n            Element.prototype.matches =\r\n                Element.prototype.msMatchesSelector ||\r\n                    Element.prototype.webkitMatchesSelector;\r\n        }\r\n    })();\r\n}\r\nvar lgQuery = /** @class */ (function () {\r\n    function lgQuery(selector) {\r\n        this.cssVenderPrefixes = [\r\n            'TransitionDuration',\r\n            'TransitionTimingFunction',\r\n            'Transform',\r\n            'Transition',\r\n        ];\r\n        this.selector = this._getSelector(selector);\r\n        this.firstElement = this._getFirstEl();\r\n        return this;\r\n    }\r\n    lgQuery.generateUUID = function () {\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n            var r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\r\n            return v.toString(16);\r\n        });\r\n    };\r\n    lgQuery.prototype._getSelector = function (selector, context) {\r\n        if (context === void 0) { context = document; }\r\n        if (typeof selector !== 'string') {\r\n            return selector;\r\n        }\r\n        context = context || document;\r\n        var fl = selector.substring(0, 1);\r\n        if (fl === '#') {\r\n            return context.querySelector(selector);\r\n        }\r\n        else {\r\n            return context.querySelectorAll(selector);\r\n        }\r\n    };\r\n    lgQuery.prototype._each = function (func) {\r\n        if (!this.selector) {\r\n            return this;\r\n        }\r\n        if (this.selector.length !== undefined) {\r\n            [].forEach.call(this.selector, func);\r\n        }\r\n        else {\r\n            func(this.selector, 0);\r\n        }\r\n        return this;\r\n    };\r\n    lgQuery.prototype._setCssVendorPrefix = function (el, cssProperty, value) {\r\n        // prettier-ignore\r\n        var property = cssProperty.replace(/-([a-z])/gi, function (s, group1) {\r\n            return group1.toUpperCase();\r\n        });\r\n        if (this.cssVenderPrefixes.indexOf(property) !== -1) {\r\n            el.style[property.charAt(0).toLowerCase() + property.slice(1)] = value;\r\n            el.style['webkit' + property] = value;\r\n            el.style['moz' + property] = value;\r\n            el.style['ms' + property] = value;\r\n            el.style['o' + property] = value;\r\n        }\r\n        else {\r\n            el.style[property] = value;\r\n        }\r\n    };\r\n    lgQuery.prototype._getFirstEl = function () {\r\n        if (this.selector && this.selector.length !== undefined) {\r\n            return this.selector[0];\r\n        }\r\n        else {\r\n            return this.selector;\r\n        }\r\n    };\r\n    lgQuery.prototype.isEventMatched = function (event, eventName) {\r\n        var eventNamespace = eventName.split('.');\r\n        return event\r\n            .split('.')\r\n            .filter(function (e) { return e; })\r\n            .every(function (e) {\r\n            return eventNamespace.indexOf(e) !== -1;\r\n        });\r\n    };\r\n    lgQuery.prototype.attr = function (attr, value) {\r\n        if (value === undefined) {\r\n            if (!this.firstElement) {\r\n                return '';\r\n            }\r\n            return this.firstElement.getAttribute(attr);\r\n        }\r\n        this._each(function (el) {\r\n            el.setAttribute(attr, value);\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.find = function (selector) {\r\n        return $LG(this._getSelector(selector, this.selector));\r\n    };\r\n    lgQuery.prototype.first = function () {\r\n        if (this.selector && this.selector.length !== undefined) {\r\n            return $LG(this.selector[0]);\r\n        }\r\n        else {\r\n            return $LG(this.selector);\r\n        }\r\n    };\r\n    lgQuery.prototype.eq = function (index) {\r\n        return $LG(this.selector[index]);\r\n    };\r\n    lgQuery.prototype.parent = function () {\r\n        return $LG(this.selector.parentElement);\r\n    };\r\n    lgQuery.prototype.get = function () {\r\n        return this._getFirstEl();\r\n    };\r\n    lgQuery.prototype.removeAttr = function (attributes) {\r\n        var attrs = attributes.split(' ');\r\n        this._each(function (el) {\r\n            attrs.forEach(function (attr) { return el.removeAttribute(attr); });\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.wrap = function (className) {\r\n        if (!this.firstElement) {\r\n            return this;\r\n        }\r\n        var wrapper = document.createElement('div');\r\n        wrapper.className = className;\r\n        this.firstElement.parentNode.insertBefore(wrapper, this.firstElement);\r\n        this.firstElement.parentNode.removeChild(this.firstElement);\r\n        wrapper.appendChild(this.firstElement);\r\n        return this;\r\n    };\r\n    lgQuery.prototype.addClass = function (classNames) {\r\n        if (classNames === void 0) { classNames = ''; }\r\n        this._each(function (el) {\r\n            // IE doesn't support multiple arguments\r\n            classNames.split(' ').forEach(function (className) {\r\n                if (className) {\r\n                    el.classList.add(className);\r\n                }\r\n            });\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.removeClass = function (classNames) {\r\n        this._each(function (el) {\r\n            // IE doesn't support multiple arguments\r\n            classNames.split(' ').forEach(function (className) {\r\n                if (className) {\r\n                    el.classList.remove(className);\r\n                }\r\n            });\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.hasClass = function (className) {\r\n        if (!this.firstElement) {\r\n            return false;\r\n        }\r\n        return this.firstElement.classList.contains(className);\r\n    };\r\n    lgQuery.prototype.hasAttribute = function (attribute) {\r\n        if (!this.firstElement) {\r\n            return false;\r\n        }\r\n        return this.firstElement.hasAttribute(attribute);\r\n    };\r\n    lgQuery.prototype.toggleClass = function (className) {\r\n        if (!this.firstElement) {\r\n            return this;\r\n        }\r\n        if (this.hasClass(className)) {\r\n            this.removeClass(className);\r\n        }\r\n        else {\r\n            this.addClass(className);\r\n        }\r\n        return this;\r\n    };\r\n    lgQuery.prototype.css = function (property, value) {\r\n        var _this = this;\r\n        this._each(function (el) {\r\n            _this._setCssVendorPrefix(el, property, value);\r\n        });\r\n        return this;\r\n    };\r\n    // Need to pass separate namespaces for separate elements\r\n    lgQuery.prototype.on = function (events, listener) {\r\n        var _this = this;\r\n        if (!this.selector) {\r\n            return this;\r\n        }\r\n        events.split(' ').forEach(function (event) {\r\n            if (!Array.isArray(lgQuery.eventListeners[event])) {\r\n                lgQuery.eventListeners[event] = [];\r\n            }\r\n            lgQuery.eventListeners[event].push(listener);\r\n            _this.selector.addEventListener(event.split('.')[0], listener);\r\n        });\r\n        return this;\r\n    };\r\n    // @todo - test this\r\n    lgQuery.prototype.once = function (event, listener) {\r\n        var _this = this;\r\n        this.on(event, function () {\r\n            _this.off(event);\r\n            listener(event);\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.off = function (event) {\r\n        var _this = this;\r\n        if (!this.selector) {\r\n            return this;\r\n        }\r\n        Object.keys(lgQuery.eventListeners).forEach(function (eventName) {\r\n            if (_this.isEventMatched(event, eventName)) {\r\n                lgQuery.eventListeners[eventName].forEach(function (listener) {\r\n                    _this.selector.removeEventListener(eventName.split('.')[0], listener);\r\n                });\r\n                lgQuery.eventListeners[eventName] = [];\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.trigger = function (event, detail) {\r\n        if (!this.firstElement) {\r\n            return this;\r\n        }\r\n        var customEvent = new CustomEvent(event.split('.')[0], {\r\n            detail: detail || null,\r\n        });\r\n        this.firstElement.dispatchEvent(customEvent);\r\n        return this;\r\n    };\r\n    // Does not support IE\r\n    lgQuery.prototype.load = function (url) {\r\n        var _this = this;\r\n        fetch(url)\r\n            .then(function (res) { return res.text(); })\r\n            .then(function (html) {\r\n            _this.selector.innerHTML = html;\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.html = function (html) {\r\n        if (html === undefined) {\r\n            if (!this.firstElement) {\r\n                return '';\r\n            }\r\n            return this.firstElement.innerHTML;\r\n        }\r\n        this._each(function (el) {\r\n            el.innerHTML = html;\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.append = function (html) {\r\n        this._each(function (el) {\r\n            if (typeof html === 'string') {\r\n                el.insertAdjacentHTML('beforeend', html);\r\n            }\r\n            else {\r\n                el.appendChild(html);\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.prepend = function (html) {\r\n        this._each(function (el) {\r\n            if (typeof html === 'string') {\r\n                el.insertAdjacentHTML('afterbegin', html);\r\n            }\r\n            else if (html instanceof HTMLElement) {\r\n                el.insertBefore(html.cloneNode(true), el.firstChild);\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.remove = function () {\r\n        this._each(function (el) {\r\n            el.parentNode.removeChild(el);\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.empty = function () {\r\n        this._each(function (el) {\r\n            el.innerHTML = '';\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.scrollTop = function (scrollTop) {\r\n        if (scrollTop !== undefined) {\r\n            document.body.scrollTop = scrollTop;\r\n            document.documentElement.scrollTop = scrollTop;\r\n            return this;\r\n        }\r\n        else {\r\n            return (window.pageYOffset ||\r\n                document.documentElement.scrollTop ||\r\n                document.body.scrollTop ||\r\n                0);\r\n        }\r\n    };\r\n    lgQuery.prototype.scrollLeft = function (scrollLeft) {\r\n        if (scrollLeft !== undefined) {\r\n            document.body.scrollLeft = scrollLeft;\r\n            document.documentElement.scrollLeft = scrollLeft;\r\n            return this;\r\n        }\r\n        else {\r\n            return (window.pageXOffset ||\r\n                document.documentElement.scrollLeft ||\r\n                document.body.scrollLeft ||\r\n                0);\r\n        }\r\n    };\r\n    lgQuery.prototype.offset = function () {\r\n        if (!this.firstElement) {\r\n            return {\r\n                left: 0,\r\n                top: 0,\r\n            };\r\n        }\r\n        var rect = this.firstElement.getBoundingClientRect();\r\n        var bodyMarginLeft = $LG('body').style().marginLeft;\r\n        // Minus body margin - https://stackoverflow.com/questions/30711548/is-getboundingclientrect-left-returning-a-wrong-value\r\n        return {\r\n            left: rect.left - parseFloat(bodyMarginLeft) + this.scrollLeft(),\r\n            top: rect.top + this.scrollTop(),\r\n        };\r\n    };\r\n    lgQuery.prototype.style = function () {\r\n        if (!this.firstElement) {\r\n            return {};\r\n        }\r\n        return (this.firstElement.currentStyle ||\r\n            window.getComputedStyle(this.firstElement));\r\n    };\r\n    // Width without padding and border even if box-sizing is used.\r\n    lgQuery.prototype.width = function () {\r\n        var style = this.style();\r\n        return (this.firstElement.clientWidth -\r\n            parseFloat(style.paddingLeft) -\r\n            parseFloat(style.paddingRight));\r\n    };\r\n    // Height without padding and border even if box-sizing is used.\r\n    lgQuery.prototype.height = function () {\r\n        var style = this.style();\r\n        return (this.firstElement.clientHeight -\r\n            parseFloat(style.paddingTop) -\r\n            parseFloat(style.paddingBottom));\r\n    };\r\n    lgQuery.eventListeners = {};\r\n    return lgQuery;\r\n}());\r\nfunction $LG(selector) {\r\n    initLgPolyfills();\r\n    return new lgQuery(selector);\r\n}\n\nvar defaultDynamicOptions = [\r\n    'src',\r\n    'sources',\r\n    'subHtml',\r\n    'subHtmlUrl',\r\n    'html',\r\n    'video',\r\n    'poster',\r\n    'slideName',\r\n    'responsive',\r\n    'srcset',\r\n    'sizes',\r\n    'iframe',\r\n    'downloadUrl',\r\n    'download',\r\n    'width',\r\n    'facebookShareUrl',\r\n    'tweetText',\r\n    'iframeTitle',\r\n    'twitterShareUrl',\r\n    'pinterestShareUrl',\r\n    'pinterestText',\r\n    'fbHtml',\r\n    'disqusIdentifier',\r\n    'disqusUrl',\r\n];\r\n// Convert html data-attribute to camalcase\r\nfunction convertToData(attr) {\r\n    // FInd a way for lgsize\r\n    if (attr === 'href') {\r\n        return 'src';\r\n    }\r\n    attr = attr.replace('data-', '');\r\n    attr = attr.charAt(0).toLowerCase() + attr.slice(1);\r\n    attr = attr.replace(/-([a-z])/g, function (g) { return g[1].toUpperCase(); });\r\n    return attr;\r\n}\r\nvar utils = {\r\n    /**\r\n     * Fetches HTML content from a given URL and inserts it into a specified element.\r\n     *\r\n     * @param url - The URL to fetch the HTML content from.\r\n     * @param element - The DOM element (jQuery object) to insert the HTML content into.\r\n     * @param insertMethod - The method to insert the HTML ('append' or 'replace').\r\n     */\r\n    fetchCaptionFromUrl: function (url, element, insertMethod) {\r\n        // Fetch content from the URL\r\n        fetch(url)\r\n            .then(function (response) { return response.text(); })\r\n            .then(function (htmlContent) {\r\n            if (insertMethod === 'append') {\r\n                var contentDiv = \"<div class=\\\"lg-sub-html\\\">\" + htmlContent + \"</div>\";\r\n                element.append(contentDiv);\r\n            }\r\n            else {\r\n                element.html(htmlContent);\r\n            }\r\n        });\r\n    },\r\n    /**\r\n     * get possible width and height from the lgSize attribute. Used for ZoomFromOrigin option\r\n     */\r\n    getSize: function (el, container, spacing, defaultLgSize) {\r\n        if (spacing === void 0) { spacing = 0; }\r\n        var LGel = $LG(el);\r\n        var lgSize = LGel.attr('data-lg-size') || defaultLgSize;\r\n        if (!lgSize) {\r\n            return;\r\n        }\r\n        var isResponsiveSizes = lgSize.split(',');\r\n        // if at-least two viewport sizes are available\r\n        if (isResponsiveSizes[1]) {\r\n            var wWidth = window.innerWidth;\r\n            for (var i = 0; i < isResponsiveSizes.length; i++) {\r\n                var size_1 = isResponsiveSizes[i];\r\n                var responsiveWidth = parseInt(size_1.split('-')[2], 10);\r\n                if (responsiveWidth > wWidth) {\r\n                    lgSize = size_1;\r\n                    break;\r\n                }\r\n                // take last item as last option\r\n                if (i === isResponsiveSizes.length - 1) {\r\n                    lgSize = size_1;\r\n                }\r\n            }\r\n        }\r\n        var size = lgSize.split('-');\r\n        var width = parseInt(size[0], 10);\r\n        var height = parseInt(size[1], 10);\r\n        var cWidth = container.width();\r\n        var cHeight = container.height() - spacing;\r\n        var maxWidth = Math.min(cWidth, width);\r\n        var maxHeight = Math.min(cHeight, height);\r\n        var ratio = Math.min(maxWidth / width, maxHeight / height);\r\n        return { width: width * ratio, height: height * ratio };\r\n    },\r\n    /**\r\n     * @desc Get transform value based on the imageSize. Used for ZoomFromOrigin option\r\n     * @param {jQuery Element}\r\n     * @returns {String} Transform CSS string\r\n     */\r\n    getTransform: function (el, container, top, bottom, imageSize) {\r\n        if (!imageSize) {\r\n            return;\r\n        }\r\n        var LGel = $LG(el).find('img').first();\r\n        if (!LGel.get()) {\r\n            return;\r\n        }\r\n        var containerRect = container.get().getBoundingClientRect();\r\n        var wWidth = containerRect.width;\r\n        // using innerWidth to include mobile safari bottom bar\r\n        var wHeight = container.height() - (top + bottom);\r\n        var elWidth = LGel.width();\r\n        var elHeight = LGel.height();\r\n        var elStyle = LGel.style();\r\n        var x = (wWidth - elWidth) / 2 -\r\n            LGel.offset().left +\r\n            (parseFloat(elStyle.paddingLeft) || 0) +\r\n            (parseFloat(elStyle.borderLeft) || 0) +\r\n            $LG(window).scrollLeft() +\r\n            containerRect.left;\r\n        var y = (wHeight - elHeight) / 2 -\r\n            LGel.offset().top +\r\n            (parseFloat(elStyle.paddingTop) || 0) +\r\n            (parseFloat(elStyle.borderTop) || 0) +\r\n            $LG(window).scrollTop() +\r\n            top;\r\n        var scX = elWidth / imageSize.width;\r\n        var scY = elHeight / imageSize.height;\r\n        var transform = 'translate3d(' +\r\n            (x *= -1) +\r\n            'px, ' +\r\n            (y *= -1) +\r\n            'px, 0) scale3d(' +\r\n            scX +\r\n            ', ' +\r\n            scY +\r\n            ', 1)';\r\n        return transform;\r\n    },\r\n    getIframeMarkup: function (iframeWidth, iframeHeight, iframeMaxWidth, iframeMaxHeight, src, iframeTitle) {\r\n        var title = iframeTitle ? 'title=\"' + iframeTitle + '\"' : '';\r\n        return \"<div class=\\\"lg-media-cont lg-has-iframe\\\" style=\\\"width:\" + iframeWidth + \"; max-width:\" + iframeMaxWidth + \"; height: \" + iframeHeight + \"; max-height:\" + iframeMaxHeight + \"\\\">\\n                    <iframe class=\\\"lg-object\\\" frameborder=\\\"0\\\" \" + title + \" src=\\\"\" + src + \"\\\"  allowfullscreen=\\\"true\\\"></iframe>\\n                </div>\";\r\n    },\r\n    getImgMarkup: function (index, src, altAttr, srcset, sizes, sources) {\r\n        var srcsetAttr = srcset ? \"srcset=\\\"\" + srcset + \"\\\"\" : '';\r\n        var sizesAttr = sizes ? \"sizes=\\\"\" + sizes + \"\\\"\" : '';\r\n        var imgMarkup = \"<img \" + altAttr + \" \" + srcsetAttr + \"  \" + sizesAttr + \" class=\\\"lg-object lg-image\\\" data-index=\\\"\" + index + \"\\\" src=\\\"\" + src + \"\\\" />\";\r\n        var sourceTag = '';\r\n        if (sources) {\r\n            var sourceObj = typeof sources === 'string' ? JSON.parse(sources) : sources;\r\n            sourceTag = sourceObj.map(function (source) {\r\n                var attrs = '';\r\n                Object.keys(source).forEach(function (key) {\r\n                    // Do not remove the first space as it is required to separate the attributes\r\n                    attrs += \" \" + key + \"=\\\"\" + source[key] + \"\\\"\";\r\n                });\r\n                return \"<source \" + attrs + \"></source>\";\r\n            });\r\n        }\r\n        return \"\" + sourceTag + imgMarkup;\r\n    },\r\n    // Get src from responsive src\r\n    getResponsiveSrc: function (srcItms) {\r\n        var rsWidth = [];\r\n        var rsSrc = [];\r\n        var src = '';\r\n        for (var i = 0; i < srcItms.length; i++) {\r\n            var _src = srcItms[i].split(' ');\r\n            // Manage empty space\r\n            if (_src[0] === '') {\r\n                _src.splice(0, 1);\r\n            }\r\n            rsSrc.push(_src[0]);\r\n            rsWidth.push(_src[1]);\r\n        }\r\n        var wWidth = window.innerWidth;\r\n        for (var j = 0; j < rsWidth.length; j++) {\r\n            if (parseInt(rsWidth[j], 10) > wWidth) {\r\n                src = rsSrc[j];\r\n                break;\r\n            }\r\n        }\r\n        return src;\r\n    },\r\n    isImageLoaded: function (img) {\r\n        if (!img)\r\n            return false;\r\n        // During the onload event, IE correctly identifies any images that\r\n        // weren’t downloaded as not complete. Others should too. Gecko-based\r\n        // browsers act like NS4 in that they report this incorrectly.\r\n        if (!img.complete) {\r\n            return false;\r\n        }\r\n        // However, they do have two very useful properties: naturalWidth and\r\n        // naturalHeight. These give the true size of the image. If it failed\r\n        // to load, either of these should be zero.\r\n        if (img.naturalWidth === 0) {\r\n            return false;\r\n        }\r\n        // No other way of checking: assume it’s ok.\r\n        return true;\r\n    },\r\n    getVideoPosterMarkup: function (_poster, dummyImg, videoContStyle, playVideoString, _isVideo) {\r\n        var videoClass = '';\r\n        if (_isVideo && _isVideo.youtube) {\r\n            videoClass = 'lg-has-youtube';\r\n        }\r\n        else if (_isVideo && _isVideo.vimeo) {\r\n            videoClass = 'lg-has-vimeo';\r\n        }\r\n        else {\r\n            videoClass = 'lg-has-html5';\r\n        }\r\n        var _dummy = dummyImg;\r\n        if (typeof dummyImg !== 'string') {\r\n            _dummy = dummyImg.outerHTML;\r\n        }\r\n        return \"<div class=\\\"lg-video-cont \" + videoClass + \"\\\" style=\\\"\" + videoContStyle + \"\\\">\\n                <div class=\\\"lg-video-play-button\\\">\\n                <svg\\n                    viewBox=\\\"0 0 20 20\\\"\\n                    preserveAspectRatio=\\\"xMidYMid\\\"\\n                    focusable=\\\"false\\\"\\n                    aria-labelledby=\\\"\" + playVideoString + \"\\\"\\n                    role=\\\"img\\\"\\n                    class=\\\"lg-video-play-icon\\\"\\n                >\\n                    <title>\" + playVideoString + \"</title>\\n                    <polygon class=\\\"lg-video-play-icon-inner\\\" points=\\\"1,0 20,10 1,20\\\"></polygon>\\n                </svg>\\n                <svg class=\\\"lg-video-play-icon-bg\\\" viewBox=\\\"0 0 50 50\\\" focusable=\\\"false\\\">\\n                    <circle cx=\\\"50%\\\" cy=\\\"50%\\\" r=\\\"20\\\"></circle></svg>\\n                <svg class=\\\"lg-video-play-icon-circle\\\" viewBox=\\\"0 0 50 50\\\" focusable=\\\"false\\\">\\n                    <circle cx=\\\"50%\\\" cy=\\\"50%\\\" r=\\\"20\\\"></circle>\\n                </svg>\\n            </div>\\n            \" + _dummy + \"\\n            <img class=\\\"lg-object lg-video-poster\\\" src=\\\"\" + _poster + \"\\\" />\\n        </div>\";\r\n    },\r\n    getFocusableElements: function (container) {\r\n        var elements = container.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type=\"text\"]:not([disabled]), input[type=\"radio\"]:not([disabled]), input[type=\"checkbox\"]:not([disabled]), select:not([disabled])');\r\n        var visibleElements = [].filter.call(elements, function (element) {\r\n            var style = window.getComputedStyle(element);\r\n            return style.display !== 'none' && style.visibility !== 'hidden';\r\n        });\r\n        return visibleElements;\r\n    },\r\n    /**\r\n     * @desc Create dynamic elements array from gallery items when dynamic option is false\r\n     * It helps to avoid frequent DOM interaction\r\n     * and avoid multiple checks for dynamic elments\r\n     *\r\n     * @returns {Array} dynamicEl\r\n     */\r\n    getDynamicOptions: function (items, extraProps, getCaptionFromTitleOrAlt, exThumbImage) {\r\n        var dynamicElements = [];\r\n        var availableDynamicOptions = __spreadArrays(defaultDynamicOptions, extraProps);\r\n        [].forEach.call(items, function (item) {\r\n            var dynamicEl = {};\r\n            for (var i = 0; i < item.attributes.length; i++) {\r\n                var attr = item.attributes[i];\r\n                if (attr.specified) {\r\n                    var dynamicAttr = convertToData(attr.name);\r\n                    var label = '';\r\n                    if (availableDynamicOptions.indexOf(dynamicAttr) > -1) {\r\n                        label = dynamicAttr;\r\n                    }\r\n                    if (label) {\r\n                        dynamicEl[label] = attr.value;\r\n                    }\r\n                }\r\n            }\r\n            var currentItem = $LG(item);\r\n            var alt = currentItem.find('img').first().attr('alt');\r\n            var title = currentItem.attr('title');\r\n            var thumb = exThumbImage\r\n                ? currentItem.attr(exThumbImage)\r\n                : currentItem.find('img').first().attr('src');\r\n            dynamicEl.thumb = thumb;\r\n            if (getCaptionFromTitleOrAlt && !dynamicEl.subHtml) {\r\n                dynamicEl.subHtml = title || alt || '';\r\n            }\r\n            dynamicEl.alt = alt || title || '';\r\n            dynamicElements.push(dynamicEl);\r\n        });\r\n        return dynamicElements;\r\n    },\r\n    isMobile: function () {\r\n        return /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\r\n    },\r\n    /**\r\n     * @desc Check the given src is video\r\n     * @param {String} src\r\n     * @return {Object} video type\r\n     * Ex:{ youtube  :  [\"//www.youtube.com/watch?v=c0asJgSyxcY\", \"c0asJgSyxcY\"] }\r\n     *\r\n     * @todo - this information can be moved to dynamicEl to avoid frequent calls\r\n     */\r\n    isVideo: function (src, isHTML5VIdeo, index) {\r\n        if (!src) {\r\n            if (isHTML5VIdeo) {\r\n                return {\r\n                    html5: true,\r\n                };\r\n            }\r\n            else {\r\n                console.error('lightGallery :- data-src is not provided on slide item ' +\r\n                    (index + 1) +\r\n                    '. Please make sure the selector property is properly configured. More info - https://www.lightgalleryjs.com/demos/html-markup/');\r\n                return;\r\n            }\r\n        }\r\n        var youtube = src.match(/\\/\\/(?:www\\.)?youtu(?:\\.be|be\\.com|be-nocookie\\.com)\\/(?:watch\\?v=|embed\\/)?([a-z0-9\\-\\_\\%]+)([\\&|?][\\S]*)*/i);\r\n        var vimeo = src.match(/\\/\\/(?:www\\.)?(?:player\\.)?vimeo.com\\/(?:video\\/)?([0-9a-z\\-_]+)(.*)?/i);\r\n        var wistia = src.match(/https?:\\/\\/(.+)?(wistia\\.com|wi\\.st)\\/(medias|embed)\\/([0-9a-z\\-_]+)(.*)/);\r\n        if (youtube) {\r\n            return {\r\n                youtube: youtube,\r\n            };\r\n        }\r\n        else if (vimeo) {\r\n            return {\r\n                vimeo: vimeo,\r\n            };\r\n        }\r\n        else if (wistia) {\r\n            return {\r\n                wistia: wistia,\r\n            };\r\n        }\r\n    },\r\n};\n\n// @ref - https://stackoverflow.com/questions/3971841/how-to-resize-images-proportionally-keeping-the-aspect-ratio\r\n// @ref - https://2ality.com/2017/04/setting-up-multi-platform-packages.html\r\n// Unique id for each gallery\r\nvar lgId = 0;\r\nvar LightGallery = /** @class */ (function () {\r\n    function LightGallery(element, options) {\r\n        this.lgOpened = false;\r\n        this.index = 0;\r\n        // lightGallery modules\r\n        this.plugins = [];\r\n        // false when lightGallery load first slide content;\r\n        this.lGalleryOn = false;\r\n        // True when a slide animation is in progress\r\n        this.lgBusy = false;\r\n        this.currentItemsInDom = [];\r\n        // Scroll top value before lightGallery is opened\r\n        this.prevScrollTop = 0;\r\n        this.bodyPaddingRight = 0;\r\n        this.isDummyImageRemoved = false;\r\n        this.dragOrSwipeEnabled = false;\r\n        this.mediaContainerPosition = {\r\n            top: 0,\r\n            bottom: 0,\r\n        };\r\n        if (!element) {\r\n            return this;\r\n        }\r\n        lgId++;\r\n        this.lgId = lgId;\r\n        this.el = element;\r\n        this.LGel = $LG(element);\r\n        this.generateSettings(options);\r\n        this.buildModules();\r\n        // When using dynamic mode, ensure dynamicEl is an array\r\n        if (this.settings.dynamic &&\r\n            this.settings.dynamicEl !== undefined &&\r\n            !Array.isArray(this.settings.dynamicEl)) {\r\n            throw 'When using dynamic mode, you must also define dynamicEl as an Array.';\r\n        }\r\n        this.galleryItems = this.getItems();\r\n        this.normalizeSettings();\r\n        // Gallery items\r\n        this.init();\r\n        this.validateLicense();\r\n        return this;\r\n    }\r\n    LightGallery.prototype.generateSettings = function (options) {\r\n        // lightGallery settings\r\n        this.settings = __assign(__assign({}, lightGalleryCoreSettings), options);\r\n        if (this.settings.isMobile &&\r\n            typeof this.settings.isMobile === 'function'\r\n            ? this.settings.isMobile()\r\n            : utils.isMobile()) {\r\n            var mobileSettings = __assign(__assign({}, this.settings.mobileSettings), this.settings.mobileSettings);\r\n            this.settings = __assign(__assign({}, this.settings), mobileSettings);\r\n        }\r\n    };\r\n    LightGallery.prototype.normalizeSettings = function () {\r\n        if (this.settings.slideEndAnimation) {\r\n            this.settings.hideControlOnEnd = false;\r\n        }\r\n        if (!this.settings.closable) {\r\n            this.settings.swipeToClose = false;\r\n        }\r\n        // And reset it on close to get the correct value next time\r\n        this.zoomFromOrigin = this.settings.zoomFromOrigin;\r\n        // At the moment, Zoom from image doesn't support dynamic options\r\n        // @todo add zoomFromOrigin support for dynamic images\r\n        if (this.settings.dynamic) {\r\n            this.zoomFromOrigin = false;\r\n        }\r\n        if (this.settings.container) {\r\n            var container = this.settings.container;\r\n            if (typeof container === 'function') {\r\n                this.settings.container = container();\r\n            }\r\n            else if (typeof container === 'string') {\r\n                var el = document.querySelector(container);\r\n                this.settings.container = el !== null && el !== void 0 ? el : document.body;\r\n            }\r\n        }\r\n        else {\r\n            this.settings.container = document.body;\r\n        }\r\n        // settings.preload should not be grater than $item.length\r\n        this.settings.preload = Math.min(this.settings.preload, this.galleryItems.length);\r\n    };\r\n    LightGallery.prototype.init = function () {\r\n        var _this = this;\r\n        this.addSlideVideoInfo(this.galleryItems);\r\n        this.buildStructure();\r\n        this.LGel.trigger(lGEvents.init, {\r\n            instance: this,\r\n        });\r\n        if (this.settings.keyPress) {\r\n            this.keyPress();\r\n        }\r\n        setTimeout(function () {\r\n            _this.enableDrag();\r\n            _this.enableSwipe();\r\n            _this.triggerPosterClick();\r\n        }, 50);\r\n        this.arrow();\r\n        if (this.settings.mousewheel) {\r\n            this.mousewheel();\r\n        }\r\n        if (!this.settings.dynamic) {\r\n            this.openGalleryOnItemClick();\r\n        }\r\n    };\r\n    LightGallery.prototype.openGalleryOnItemClick = function () {\r\n        var _this = this;\r\n        var _loop_1 = function (index) {\r\n            var element = this_1.items[index];\r\n            var $element = $LG(element);\r\n            // Using different namespace for click because click event should not unbind if selector is same object('this')\r\n            // @todo manage all event listners - should have namespace that represent element\r\n            var uuid = lgQuery.generateUUID();\r\n            $element\r\n                .attr('data-lg-id', uuid)\r\n                .on(\"click.lgcustom-item-\" + uuid, function (e) {\r\n                e.preventDefault();\r\n                var currentItemIndex = _this.settings.index || index;\r\n                _this.openGallery(currentItemIndex, element);\r\n            });\r\n        };\r\n        var this_1 = this;\r\n        // Using for loop instead of using bubbling as the items can be any html element.\r\n        for (var index = 0; index < this.items.length; index++) {\r\n            _loop_1(index);\r\n        }\r\n    };\r\n    /**\r\n     * Module constructor\r\n     * Modules are build incrementally.\r\n     * Gallery should be opened only once all the modules are initialized.\r\n     * use moduleBuildTimeout to make sure this\r\n     */\r\n    LightGallery.prototype.buildModules = function () {\r\n        var _this = this;\r\n        this.settings.plugins.forEach(function (plugin) {\r\n            _this.plugins.push(new plugin(_this, $LG));\r\n        });\r\n    };\r\n    LightGallery.prototype.validateLicense = function () {\r\n        if (!this.settings.licenseKey) {\r\n            console.error('Please provide a valid license key');\r\n        }\r\n        else if (this.settings.licenseKey === '0000-0000-000-0000') {\r\n            console.warn(\"lightGallery: \" + this.settings.licenseKey + \" license key is not valid for production use\");\r\n        }\r\n    };\r\n    LightGallery.prototype.getSlideItem = function (index) {\r\n        return $LG(this.getSlideItemId(index));\r\n    };\r\n    LightGallery.prototype.getSlideItemId = function (index) {\r\n        return \"#lg-item-\" + this.lgId + \"-\" + index;\r\n    };\r\n    LightGallery.prototype.getIdName = function (id) {\r\n        return id + \"-\" + this.lgId;\r\n    };\r\n    LightGallery.prototype.getElementById = function (id) {\r\n        return $LG(\"#\" + this.getIdName(id));\r\n    };\r\n    LightGallery.prototype.manageSingleSlideClassName = function () {\r\n        if (this.galleryItems.length < 2) {\r\n            this.outer.addClass('lg-single-item');\r\n        }\r\n        else {\r\n            this.outer.removeClass('lg-single-item');\r\n        }\r\n    };\r\n    LightGallery.prototype.buildStructure = function () {\r\n        var _this = this;\r\n        var container = this.$container && this.$container.get();\r\n        if (container) {\r\n            return;\r\n        }\r\n        var controls = '';\r\n        var subHtmlCont = '';\r\n        // Create controls\r\n        if (this.settings.controls) {\r\n            controls = \"<button type=\\\"button\\\" id=\\\"\" + this.getIdName('lg-prev') + \"\\\" aria-label=\\\"\" + this.settings.strings['previousSlide'] + \"\\\" class=\\\"lg-prev lg-icon\\\"> \" + this.settings.prevHtml + \" </button>\\n                <button type=\\\"button\\\" id=\\\"\" + this.getIdName('lg-next') + \"\\\" aria-label=\\\"\" + this.settings.strings['nextSlide'] + \"\\\" class=\\\"lg-next lg-icon\\\"> \" + this.settings.nextHtml + \" </button>\";\r\n        }\r\n        if (this.settings.appendSubHtmlTo !== '.lg-item') {\r\n            subHtmlCont =\r\n                '<div class=\"lg-sub-html\" role=\"status\" aria-live=\"polite\"></div>';\r\n        }\r\n        var addClasses = '';\r\n        if (this.settings.allowMediaOverlap) {\r\n            // Do not remove space before last single quote\r\n            addClasses += 'lg-media-overlap ';\r\n        }\r\n        var ariaLabelledby = this.settings.ariaLabelledby\r\n            ? 'aria-labelledby=\"' + this.settings.ariaLabelledby + '\"'\r\n            : '';\r\n        var ariaDescribedby = this.settings.ariaDescribedby\r\n            ? 'aria-describedby=\"' + this.settings.ariaDescribedby + '\"'\r\n            : '';\r\n        var containerClassName = \"lg-container \" + this.settings.addClass + \" \" + (document.body !== this.settings.container ? 'lg-inline' : '');\r\n        var closeIcon = this.settings.closable && this.settings.showCloseIcon\r\n            ? \"<button type=\\\"button\\\" aria-label=\\\"\" + this.settings.strings['closeGallery'] + \"\\\" id=\\\"\" + this.getIdName('lg-close') + \"\\\" class=\\\"lg-close lg-icon\\\"></button>\"\r\n            : '';\r\n        var maximizeIcon = this.settings.showMaximizeIcon\r\n            ? \"<button type=\\\"button\\\" aria-label=\\\"\" + this.settings.strings['toggleMaximize'] + \"\\\" id=\\\"\" + this.getIdName('lg-maximize') + \"\\\" class=\\\"lg-maximize lg-icon\\\"></button>\"\r\n            : '';\r\n        var template = \"\\n        <div class=\\\"\" + containerClassName + \"\\\" id=\\\"\" + this.getIdName('lg-container') + \"\\\" tabindex=\\\"-1\\\" aria-modal=\\\"true\\\" \" + ariaLabelledby + \" \" + ariaDescribedby + \" role=\\\"dialog\\\"\\n        >\\n            <div id=\\\"\" + this.getIdName('lg-backdrop') + \"\\\" class=\\\"lg-backdrop\\\"></div>\\n\\n            <div id=\\\"\" + this.getIdName('lg-outer') + \"\\\" class=\\\"lg-outer lg-use-css3 lg-css3 lg-hide-items \" + addClasses + \" \\\">\\n\\n              <div id=\\\"\" + this.getIdName('lg-content') + \"\\\" class=\\\"lg-content\\\">\\n                <div id=\\\"\" + this.getIdName('lg-inner') + \"\\\" class=\\\"lg-inner\\\">\\n                </div>\\n                \" + controls + \"\\n              </div>\\n                <div id=\\\"\" + this.getIdName('lg-toolbar') + \"\\\" class=\\\"lg-toolbar lg-group\\\">\\n                    \" + maximizeIcon + \"\\n                    \" + closeIcon + \"\\n                    </div>\\n                    \" + (this.settings.appendSubHtmlTo === '.lg-outer'\r\n            ? subHtmlCont\r\n            : '') + \"\\n                <div id=\\\"\" + this.getIdName('lg-components') + \"\\\" class=\\\"lg-components\\\">\\n                    \" + (this.settings.appendSubHtmlTo === '.lg-sub-html'\r\n            ? subHtmlCont\r\n            : '') + \"\\n                </div>\\n            </div>\\n        </div>\\n        \";\r\n        $LG(this.settings.container).append(template);\r\n        if (document.body !== this.settings.container) {\r\n            $LG(this.settings.container).css('position', 'relative');\r\n        }\r\n        this.outer = this.getElementById('lg-outer');\r\n        this.$lgComponents = this.getElementById('lg-components');\r\n        this.$backdrop = this.getElementById('lg-backdrop');\r\n        this.$container = this.getElementById('lg-container');\r\n        this.$inner = this.getElementById('lg-inner');\r\n        this.$content = this.getElementById('lg-content');\r\n        this.$toolbar = this.getElementById('lg-toolbar');\r\n        this.$backdrop.css('transition-duration', this.settings.backdropDuration + 'ms');\r\n        var outerClassNames = this.settings.mode + \" \";\r\n        this.manageSingleSlideClassName();\r\n        if (this.settings.enableDrag) {\r\n            outerClassNames += 'lg-grab ';\r\n        }\r\n        this.outer.addClass(outerClassNames);\r\n        this.$inner.css('transition-timing-function', this.settings.easing);\r\n        this.$inner.css('transition-duration', this.settings.speed + 'ms');\r\n        if (this.settings.download) {\r\n            this.$toolbar.append(\"<a id=\\\"\" + this.getIdName('lg-download') + \"\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\" aria-label=\\\"\" + this.settings.strings['download'] + \"\\\" download class=\\\"lg-download lg-icon\\\"></a>\");\r\n        }\r\n        this.counter();\r\n        $LG(window).on(\"resize.lg.global\" + this.lgId + \" orientationchange.lg.global\" + this.lgId, function () {\r\n            _this.refreshOnResize();\r\n        });\r\n        this.hideBars();\r\n        this.manageCloseGallery();\r\n        this.toggleMaximize();\r\n        this.initModules();\r\n    };\r\n    LightGallery.prototype.refreshOnResize = function () {\r\n        if (this.lgOpened) {\r\n            var currentGalleryItem = this.galleryItems[this.index];\r\n            var __slideVideoInfo = currentGalleryItem.__slideVideoInfo;\r\n            this.mediaContainerPosition = this.getMediaContainerPosition();\r\n            var _a = this.mediaContainerPosition, top_1 = _a.top, bottom = _a.bottom;\r\n            this.currentImageSize = utils.getSize(this.items[this.index], this.outer, top_1 + bottom, __slideVideoInfo && this.settings.videoMaxSize);\r\n            if (__slideVideoInfo) {\r\n                this.resizeVideoSlide(this.index, this.currentImageSize);\r\n            }\r\n            if (this.zoomFromOrigin && !this.isDummyImageRemoved) {\r\n                var imgStyle = this.getDummyImgStyles(this.currentImageSize);\r\n                this.outer\r\n                    .find('.lg-current .lg-dummy-img')\r\n                    .first()\r\n                    .attr('style', imgStyle);\r\n            }\r\n            this.LGel.trigger(lGEvents.containerResize);\r\n        }\r\n    };\r\n    LightGallery.prototype.resizeVideoSlide = function (index, imageSize) {\r\n        var lgVideoStyle = this.getVideoContStyle(imageSize);\r\n        var currentSlide = this.getSlideItem(index);\r\n        currentSlide.find('.lg-video-cont').attr('style', lgVideoStyle);\r\n    };\r\n    /**\r\n     * Update slides dynamically.\r\n     * Add, edit or delete slides dynamically when lightGallery is opened.\r\n     * Modify the current gallery items and pass it via updateSlides method\r\n     * @note\r\n     * - Do not mutate existing lightGallery items directly.\r\n     * - Always pass new list of gallery items\r\n     * - You need to take care of thumbnails outside the gallery if any\r\n     * - user this method only if you want to update slides when the gallery is opened. Otherwise, use `refresh()` method.\r\n     * @param items Gallery items\r\n     * @param index After the update operation, which slide gallery should navigate to\r\n     * @category lGPublicMethods\r\n     * @example\r\n     * const plugin = lightGallery();\r\n     *\r\n     * // Adding slides dynamically\r\n     * let galleryItems = [\r\n     * // Access existing lightGallery items\r\n     * // galleryItems are automatically generated internally from the gallery HTML markup\r\n     * // or directly from galleryItems when dynamic gallery is used\r\n     *   ...plugin.galleryItems,\r\n     *     ...[\r\n     *       {\r\n     *         src: 'img/img-1.png',\r\n     *           thumb: 'img/thumb1.png',\r\n     *         },\r\n     *     ],\r\n     *   ];\r\n     *   plugin.updateSlides(\r\n     *     galleryItems,\r\n     *     plugin.index,\r\n     *   );\r\n     *\r\n     *\r\n     * // Remove slides dynamically\r\n     * galleryItems = JSON.parse(\r\n     *   JSON.stringify(updateSlideInstance.galleryItems),\r\n     * );\r\n     * galleryItems.shift();\r\n     * updateSlideInstance.updateSlides(galleryItems, 1);\r\n     * @see <a href=\"/demos/update-slides/\">Demo</a>\r\n     */\r\n    LightGallery.prototype.updateSlides = function (items, index) {\r\n        if (this.index > items.length - 1) {\r\n            this.index = items.length - 1;\r\n        }\r\n        if (items.length === 1) {\r\n            this.index = 0;\r\n        }\r\n        if (!items.length) {\r\n            this.closeGallery();\r\n            return;\r\n        }\r\n        var currentSrc = this.galleryItems[index].src;\r\n        this.galleryItems = items;\r\n        this.updateControls();\r\n        this.$inner.empty();\r\n        this.currentItemsInDom = [];\r\n        var _index = 0;\r\n        // Find the current index based on source value of the slide\r\n        this.galleryItems.some(function (galleryItem, itemIndex) {\r\n            if (galleryItem.src === currentSrc) {\r\n                _index = itemIndex;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        this.currentItemsInDom = this.organizeSlideItems(_index, -1);\r\n        this.loadContent(_index, true);\r\n        this.getSlideItem(_index).addClass('lg-current');\r\n        this.index = _index;\r\n        this.updateCurrentCounter(_index);\r\n        this.LGel.trigger(lGEvents.updateSlides);\r\n    };\r\n    // Get gallery items based on multiple conditions\r\n    LightGallery.prototype.getItems = function () {\r\n        // Gallery items\r\n        this.items = [];\r\n        if (!this.settings.dynamic) {\r\n            if (this.settings.selector === 'this') {\r\n                this.items.push(this.el);\r\n            }\r\n            else if (this.settings.selector) {\r\n                if (typeof this.settings.selector === 'string') {\r\n                    if (this.settings.selectWithin) {\r\n                        var selectWithin = $LG(this.settings.selectWithin);\r\n                        this.items = selectWithin\r\n                            .find(this.settings.selector)\r\n                            .get();\r\n                    }\r\n                    else {\r\n                        this.items = this.el.querySelectorAll(this.settings.selector);\r\n                    }\r\n                }\r\n                else {\r\n                    this.items = this.settings.selector;\r\n                }\r\n            }\r\n            else {\r\n                this.items = this.el.children;\r\n            }\r\n            return utils.getDynamicOptions(this.items, this.settings.extraProps, this.settings.getCaptionFromTitleOrAlt, this.settings.exThumbImage);\r\n        }\r\n        else {\r\n            return this.settings.dynamicEl || [];\r\n        }\r\n    };\r\n    LightGallery.prototype.shouldHideScrollbar = function () {\r\n        return (this.settings.hideScrollbar &&\r\n            document.body === this.settings.container);\r\n    };\r\n    LightGallery.prototype.hideScrollbar = function () {\r\n        if (!this.shouldHideScrollbar()) {\r\n            return;\r\n        }\r\n        this.bodyPaddingRight = parseFloat($LG('body').style().paddingRight);\r\n        var bodyRect = document.documentElement.getBoundingClientRect();\r\n        var scrollbarWidth = window.innerWidth - bodyRect.width;\r\n        $LG(document.body).css('padding-right', scrollbarWidth + this.bodyPaddingRight + 'px');\r\n        $LG(document.body).addClass('lg-overlay-open');\r\n    };\r\n    LightGallery.prototype.resetScrollBar = function () {\r\n        if (!this.shouldHideScrollbar()) {\r\n            return;\r\n        }\r\n        $LG(document.body).css('padding-right', this.bodyPaddingRight + 'px');\r\n        $LG(document.body).removeClass('lg-overlay-open');\r\n    };\r\n    /**\r\n     * Open lightGallery.\r\n     * Open gallery with specific slide by passing index of the slide as parameter.\r\n     * @category lGPublicMethods\r\n     * @param {Number} index  - index of the slide\r\n     * @param {HTMLElement} element - Which image lightGallery should zoom from\r\n     *\r\n     * @example\r\n     * const $dynamicGallery = document.getElementById('dynamic-gallery-demo');\r\n     * const dynamicGallery = lightGallery($dynamicGallery, {\r\n     *     dynamic: true,\r\n     *     dynamicEl: [\r\n     *         {\r\n     *              src: 'img/1.jpg',\r\n     *              thumb: 'img/thumb-1.jpg',\r\n     *              subHtml: '<h4>Image 1 title</h4><p>Image 1 descriptions.</p>',\r\n     *         },\r\n     *         ...\r\n     *     ],\r\n     * });\r\n     * $dynamicGallery.addEventListener('click', function () {\r\n     *     // Starts with third item.(Optional).\r\n     *     // This is useful if you want use dynamic mode with\r\n     *     // custom thumbnails (thumbnails outside gallery),\r\n     *     dynamicGallery.openGallery(2);\r\n     * });\r\n     *\r\n     */\r\n    LightGallery.prototype.openGallery = function (index, element) {\r\n        var _this = this;\r\n        if (index === void 0) { index = this.settings.index; }\r\n        // prevent accidental double execution\r\n        if (this.lgOpened)\r\n            return;\r\n        this.lgOpened = true;\r\n        this.outer.removeClass('lg-hide-items');\r\n        this.hideScrollbar();\r\n        // Add display block, but still has opacity 0\r\n        this.$container.addClass('lg-show');\r\n        var itemsToBeInsertedToDom = this.getItemsToBeInsertedToDom(index, index);\r\n        this.currentItemsInDom = itemsToBeInsertedToDom;\r\n        var items = '';\r\n        itemsToBeInsertedToDom.forEach(function (item) {\r\n            items = items + (\"<div id=\\\"\" + item + \"\\\" class=\\\"lg-item\\\"></div>\");\r\n        });\r\n        this.$inner.append(items);\r\n        this.addHtml(index);\r\n        var transform = '';\r\n        this.mediaContainerPosition = this.getMediaContainerPosition();\r\n        var _a = this.mediaContainerPosition, top = _a.top, bottom = _a.bottom;\r\n        if (!this.settings.allowMediaOverlap) {\r\n            this.setMediaContainerPosition(top, bottom);\r\n        }\r\n        var __slideVideoInfo = this.galleryItems[index].__slideVideoInfo;\r\n        if (this.zoomFromOrigin && element) {\r\n            this.currentImageSize = utils.getSize(element, this.outer, top + bottom, __slideVideoInfo && this.settings.videoMaxSize);\r\n            transform = utils.getTransform(element, this.outer, top, bottom, this.currentImageSize);\r\n        }\r\n        if (!this.zoomFromOrigin || !transform) {\r\n            this.outer.addClass(this.settings.startClass);\r\n            this.getSlideItem(index).removeClass('lg-complete');\r\n        }\r\n        var timeout = this.settings.zoomFromOrigin\r\n            ? 100\r\n            : this.settings.backdropDuration;\r\n        setTimeout(function () {\r\n            _this.outer.addClass('lg-components-open');\r\n        }, timeout);\r\n        this.index = index;\r\n        this.LGel.trigger(lGEvents.beforeOpen);\r\n        // add class lg-current to remove initial transition\r\n        this.getSlideItem(index).addClass('lg-current');\r\n        this.lGalleryOn = false;\r\n        // Store the current scroll top value to scroll back after closing the gallery..\r\n        this.prevScrollTop = $LG(window).scrollTop();\r\n        setTimeout(function () {\r\n            // Need to check both zoomFromOrigin and transform values as we need to set set the\r\n            // default opening animation if user missed to add the lg-size attribute\r\n            if (_this.zoomFromOrigin && transform) {\r\n                var currentSlide_1 = _this.getSlideItem(index);\r\n                currentSlide_1.css('transform', transform);\r\n                setTimeout(function () {\r\n                    currentSlide_1\r\n                        .addClass('lg-start-progress lg-start-end-progress')\r\n                        .css('transition-duration', _this.settings.startAnimationDuration + 'ms');\r\n                    _this.outer.addClass('lg-zoom-from-image');\r\n                });\r\n                setTimeout(function () {\r\n                    currentSlide_1.css('transform', 'translate3d(0, 0, 0)');\r\n                }, 100);\r\n            }\r\n            setTimeout(function () {\r\n                _this.$backdrop.addClass('in');\r\n                _this.$container.addClass('lg-show-in');\r\n            }, 10);\r\n            setTimeout(function () {\r\n                if (_this.settings.trapFocus &&\r\n                    document.body === _this.settings.container) {\r\n                    _this.trapFocus();\r\n                }\r\n            }, _this.settings.backdropDuration + 50);\r\n            // lg-visible class resets gallery opacity to 1\r\n            if (!_this.zoomFromOrigin || !transform) {\r\n                setTimeout(function () {\r\n                    _this.outer.addClass('lg-visible');\r\n                }, _this.settings.backdropDuration);\r\n            }\r\n            // initiate slide function\r\n            _this.slide(index, false, false, false);\r\n            _this.LGel.trigger(lGEvents.afterOpen);\r\n        });\r\n        if (document.body === this.settings.container) {\r\n            $LG('html').addClass('lg-on');\r\n        }\r\n    };\r\n    /**\r\n     * Note - Changing the position of the media on every slide transition creates a flickering effect.\r\n     * Therefore, The height of the caption is calculated dynamically, only once based on the first slide caption.\r\n     * if you have dynamic captions for each media,\r\n     * you can provide an appropriate height for the captions via allowMediaOverlap option\r\n     */\r\n    LightGallery.prototype.getMediaContainerPosition = function () {\r\n        if (this.settings.allowMediaOverlap) {\r\n            return {\r\n                top: 0,\r\n                bottom: 0,\r\n            };\r\n        }\r\n        var top = this.$toolbar.get().clientHeight || 0;\r\n        var subHtml = this.outer.find('.lg-components .lg-sub-html').get();\r\n        var captionHeight = this.settings.defaultCaptionHeight ||\r\n            (subHtml && subHtml.clientHeight) ||\r\n            0;\r\n        var thumbContainer = this.outer.find('.lg-thumb-outer').get();\r\n        var thumbHeight = thumbContainer ? thumbContainer.clientHeight : 0;\r\n        var bottom = thumbHeight + captionHeight;\r\n        return {\r\n            top: top,\r\n            bottom: bottom,\r\n        };\r\n    };\r\n    LightGallery.prototype.setMediaContainerPosition = function (top, bottom) {\r\n        if (top === void 0) { top = 0; }\r\n        if (bottom === void 0) { bottom = 0; }\r\n        this.$content.css('top', top + 'px').css('bottom', bottom + 'px');\r\n    };\r\n    LightGallery.prototype.hideBars = function () {\r\n        var _this = this;\r\n        // Hide controllers if mouse doesn't move for some period\r\n        setTimeout(function () {\r\n            _this.outer.removeClass('lg-hide-items');\r\n            if (_this.settings.hideBarsDelay > 0) {\r\n                _this.outer.on('mousemove.lg click.lg touchstart.lg', function () {\r\n                    _this.outer.removeClass('lg-hide-items');\r\n                    clearTimeout(_this.hideBarTimeout);\r\n                    // Timeout will be cleared on each slide movement also\r\n                    _this.hideBarTimeout = setTimeout(function () {\r\n                        _this.outer.addClass('lg-hide-items');\r\n                    }, _this.settings.hideBarsDelay);\r\n                });\r\n                _this.outer.trigger('mousemove.lg');\r\n            }\r\n        }, this.settings.showBarsAfter);\r\n    };\r\n    LightGallery.prototype.initPictureFill = function ($img) {\r\n        if (this.settings.supportLegacyBrowser) {\r\n            try {\r\n                picturefill({\r\n                    elements: [$img.get()],\r\n                });\r\n            }\r\n            catch (e) {\r\n                console.warn('lightGallery :- If you want srcset or picture tag to be supported for older browser please include picturefil javascript library in your document.');\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     *  @desc Create image counter\r\n     *  Ex: 1/10\r\n     */\r\n    LightGallery.prototype.counter = function () {\r\n        if (this.settings.counter) {\r\n            var counterHtml = \"<div class=\\\"lg-counter\\\" role=\\\"status\\\" aria-live=\\\"polite\\\">\\n                <span id=\\\"\" + this.getIdName('lg-counter-current') + \"\\\" class=\\\"lg-counter-current\\\">\" + (this.index + 1) + \" </span> /\\n                <span id=\\\"\" + this.getIdName('lg-counter-all') + \"\\\" class=\\\"lg-counter-all\\\">\" + this.galleryItems.length + \" </span></div>\";\r\n            this.outer.find(this.settings.appendCounterTo).append(counterHtml);\r\n        }\r\n    };\r\n    /**\r\n     *  @desc add sub-html into the slide\r\n     *  @param {Number} index - index of the slide\r\n     */\r\n    LightGallery.prototype.addHtml = function (index) {\r\n        var subHtml;\r\n        var subHtmlUrl;\r\n        if (this.galleryItems[index].subHtmlUrl) {\r\n            subHtmlUrl = this.galleryItems[index].subHtmlUrl;\r\n        }\r\n        else {\r\n            subHtml = this.galleryItems[index].subHtml;\r\n        }\r\n        if (!subHtmlUrl) {\r\n            if (subHtml) {\r\n                // get first letter of sub-html\r\n                // if first letter starts with . or # get the html form the jQuery object\r\n                var fL = subHtml.substring(0, 1);\r\n                if (fL === '.' || fL === '#') {\r\n                    try {\r\n                        if (this.settings.subHtmlSelectorRelative &&\r\n                            !this.settings.dynamic) {\r\n                            subHtml = $LG(this.items)\r\n                                .eq(index)\r\n                                .find(subHtml)\r\n                                .first()\r\n                                .html();\r\n                        }\r\n                        else {\r\n                            subHtml = $LG(subHtml).first().html();\r\n                        }\r\n                    }\r\n                    catch (error) {\r\n                        console.warn(\"Error processing subHtml selector \\\"\" + subHtml + \"\\\"\");\r\n                        subHtml = '';\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                subHtml = '';\r\n            }\r\n        }\r\n        if (this.settings.appendSubHtmlTo !== '.lg-item') {\r\n            if (subHtmlUrl) {\r\n                utils.fetchCaptionFromUrl(subHtmlUrl, this.outer.find('.lg-sub-html'), 'replace');\r\n            }\r\n            else {\r\n                this.outer.find('.lg-sub-html').html(subHtml);\r\n            }\r\n        }\r\n        else {\r\n            var currentSlide = $LG(this.getSlideItemId(index));\r\n            if (subHtmlUrl) {\r\n                utils.fetchCaptionFromUrl(subHtmlUrl, currentSlide, 'append');\r\n            }\r\n            else {\r\n                currentSlide.append(\"<div class=\\\"lg-sub-html\\\">\" + subHtml + \"</div>\");\r\n            }\r\n        }\r\n        // Add lg-empty-html class if title doesn't exist\r\n        if (typeof subHtml !== 'undefined' && subHtml !== null) {\r\n            if (subHtml === '') {\r\n                this.outer\r\n                    .find(this.settings.appendSubHtmlTo)\r\n                    .addClass('lg-empty-html');\r\n            }\r\n            else {\r\n                this.outer\r\n                    .find(this.settings.appendSubHtmlTo)\r\n                    .removeClass('lg-empty-html');\r\n            }\r\n        }\r\n        this.LGel.trigger(lGEvents.afterAppendSubHtml, {\r\n            index: index,\r\n        });\r\n    };\r\n    /**\r\n     *  @desc Preload slides\r\n     *  @param {Number} index - index of the slide\r\n     * @todo preload not working for the first slide, Also, should work for the first and last slide as well\r\n     */\r\n    LightGallery.prototype.preload = function (index) {\r\n        for (var i = 1; i <= this.settings.preload; i++) {\r\n            if (i >= this.galleryItems.length - index) {\r\n                break;\r\n            }\r\n            this.loadContent(index + i, false);\r\n        }\r\n        for (var j = 1; j <= this.settings.preload; j++) {\r\n            if (index - j < 0) {\r\n                break;\r\n            }\r\n            this.loadContent(index - j, false);\r\n        }\r\n    };\r\n    LightGallery.prototype.getDummyImgStyles = function (imageSize) {\r\n        if (!imageSize)\r\n            return '';\r\n        return \"width:\" + imageSize.width + \"px;\\n                margin-left: -\" + imageSize.width / 2 + \"px;\\n                margin-top: -\" + imageSize.height / 2 + \"px;\\n                height:\" + imageSize.height + \"px\";\r\n    };\r\n    LightGallery.prototype.getVideoContStyle = function (imageSize) {\r\n        if (!imageSize)\r\n            return '';\r\n        return \"width:\" + imageSize.width + \"px;\\n                height:\" + imageSize.height + \"px\";\r\n    };\r\n    LightGallery.prototype.getDummyImageContent = function ($currentSlide, index, alt) {\r\n        var $currentItem;\r\n        if (!this.settings.dynamic) {\r\n            $currentItem = $LG(this.items).eq(index);\r\n        }\r\n        if ($currentItem) {\r\n            var _dummyImgSrc = void 0;\r\n            if (!this.settings.exThumbImage) {\r\n                _dummyImgSrc = $currentItem.find('img').first().attr('src');\r\n            }\r\n            else {\r\n                _dummyImgSrc = $currentItem.attr(this.settings.exThumbImage);\r\n            }\r\n            if (!_dummyImgSrc)\r\n                return '';\r\n            var imgStyle = this.getDummyImgStyles(this.currentImageSize);\r\n            var dummyImgContentImg = document.createElement('img');\r\n            dummyImgContentImg.alt = alt || '';\r\n            dummyImgContentImg.src = _dummyImgSrc;\r\n            dummyImgContentImg.className = \"lg-dummy-img\";\r\n            dummyImgContentImg.style.cssText = imgStyle;\r\n            $currentSlide.addClass('lg-first-slide');\r\n            this.outer.addClass('lg-first-slide-loading');\r\n            return dummyImgContentImg;\r\n        }\r\n        return '';\r\n    };\r\n    LightGallery.prototype.setImgMarkup = function (src, $currentSlide, index) {\r\n        var currentGalleryItem = this.galleryItems[index];\r\n        var alt = currentGalleryItem.alt, srcset = currentGalleryItem.srcset, sizes = currentGalleryItem.sizes, sources = currentGalleryItem.sources;\r\n        // Use the thumbnail as dummy image which will be resized to actual image size and\r\n        // displayed on top of actual image\r\n        var imgContent = '';\r\n        var altAttr = alt ? 'alt=\"' + alt + '\"' : '';\r\n        if (this.isFirstSlideWithZoomAnimation()) {\r\n            imgContent = this.getDummyImageContent($currentSlide, index, altAttr);\r\n        }\r\n        else {\r\n            imgContent = utils.getImgMarkup(index, src, altAttr, srcset, sizes, sources);\r\n        }\r\n        var picture = document.createElement('picture');\r\n        picture.className = 'lg-img-wrap';\r\n        $LG(picture).append(imgContent);\r\n        $currentSlide.prepend(picture);\r\n    };\r\n    LightGallery.prototype.onSlideObjectLoad = function ($slide, isHTML5VideoWithoutPoster, onLoad, onError) {\r\n        var mediaObject = $slide.find('.lg-object').first();\r\n        if (utils.isImageLoaded(mediaObject.get()) ||\r\n            isHTML5VideoWithoutPoster) {\r\n            onLoad();\r\n        }\r\n        else {\r\n            mediaObject.on('load.lg error.lg', function () {\r\n                onLoad && onLoad();\r\n            });\r\n            mediaObject.on('error.lg', function () {\r\n                onError && onError();\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param $el Current slide item\r\n     * @param index\r\n     * @param delay Delay is 0 except first time\r\n     * @param speed Speed is same as delay, except it is 0 if gallery is opened via hash plugin\r\n     * @param isFirstSlide\r\n     */\r\n    LightGallery.prototype.onLgObjectLoad = function (currentSlide, index, delay, speed, isFirstSlide, isHTML5VideoWithoutPoster) {\r\n        var _this = this;\r\n        this.onSlideObjectLoad(currentSlide, isHTML5VideoWithoutPoster, function () {\r\n            _this.triggerSlideItemLoad(currentSlide, index, delay, speed, isFirstSlide);\r\n        }, function () {\r\n            currentSlide.addClass('lg-complete lg-complete_');\r\n            currentSlide.html('<span class=\"lg-error-msg\">' +\r\n                _this.settings.strings['mediaLoadingFailed'] +\r\n                '</span>');\r\n        });\r\n    };\r\n    LightGallery.prototype.triggerSlideItemLoad = function ($currentSlide, index, delay, speed, isFirstSlide) {\r\n        var _this = this;\r\n        var currentGalleryItem = this.galleryItems[index];\r\n        // Adding delay for video slides without poster for better performance and user experience\r\n        // Videos should start playing once once the gallery is completely loaded\r\n        var _speed = isFirstSlide &&\r\n            this.getSlideType(currentGalleryItem) === 'video' &&\r\n            !currentGalleryItem.poster\r\n            ? speed\r\n            : 0;\r\n        setTimeout(function () {\r\n            $currentSlide.addClass('lg-complete lg-complete_');\r\n            _this.LGel.trigger(lGEvents.slideItemLoad, {\r\n                index: index,\r\n                delay: delay || 0,\r\n                isFirstSlide: isFirstSlide,\r\n            });\r\n        }, _speed);\r\n    };\r\n    LightGallery.prototype.isFirstSlideWithZoomAnimation = function () {\r\n        return !!(!this.lGalleryOn &&\r\n            this.zoomFromOrigin &&\r\n            this.currentImageSize);\r\n    };\r\n    // Add video slideInfo\r\n    LightGallery.prototype.addSlideVideoInfo = function (items) {\r\n        var _this = this;\r\n        items.forEach(function (element, index) {\r\n            element.__slideVideoInfo = utils.isVideo(element.src, !!element.video, index);\r\n            if (element.__slideVideoInfo &&\r\n                _this.settings.loadYouTubePoster &&\r\n                !element.poster &&\r\n                element.__slideVideoInfo.youtube) {\r\n                element.poster = \"//img.youtube.com/vi/\" + element.__slideVideoInfo.youtube[1] + \"/maxresdefault.jpg\";\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     *  Load slide content into slide.\r\n     *  This is used to load content into slides that is not visible too\r\n     *  @param {Number} index - index of the slide.\r\n     *  @param {Boolean} rec - if true call loadcontent() function again.\r\n     */\r\n    LightGallery.prototype.loadContent = function (index, rec) {\r\n        var _this = this;\r\n        var currentGalleryItem = this.galleryItems[index];\r\n        var $currentSlide = $LG(this.getSlideItemId(index));\r\n        var poster = currentGalleryItem.poster, srcset = currentGalleryItem.srcset, sizes = currentGalleryItem.sizes, sources = currentGalleryItem.sources;\r\n        var src = currentGalleryItem.src;\r\n        var video = currentGalleryItem.video;\r\n        var _html5Video = video && typeof video === 'string' ? JSON.parse(video) : video;\r\n        if (currentGalleryItem.responsive) {\r\n            var srcDyItms = currentGalleryItem.responsive.split(',');\r\n            src = utils.getResponsiveSrc(srcDyItms) || src;\r\n        }\r\n        var videoInfo = currentGalleryItem.__slideVideoInfo;\r\n        var lgVideoStyle = '';\r\n        var iframe = !!currentGalleryItem.iframe;\r\n        var isFirstSlide = !this.lGalleryOn;\r\n        // delay for adding complete class. it is 0 except first time.\r\n        var delay = 0;\r\n        if (isFirstSlide) {\r\n            if (this.zoomFromOrigin && this.currentImageSize) {\r\n                delay = this.settings.startAnimationDuration + 10;\r\n            }\r\n            else {\r\n                delay = this.settings.backdropDuration + 10;\r\n            }\r\n        }\r\n        if (!$currentSlide.hasClass('lg-loaded')) {\r\n            if (videoInfo) {\r\n                var _a = this.mediaContainerPosition, top_2 = _a.top, bottom = _a.bottom;\r\n                var videoSize = utils.getSize(this.items[index], this.outer, top_2 + bottom, videoInfo && this.settings.videoMaxSize);\r\n                lgVideoStyle = this.getVideoContStyle(videoSize);\r\n            }\r\n            if (iframe) {\r\n                var markup = utils.getIframeMarkup(this.settings.iframeWidth, this.settings.iframeHeight, this.settings.iframeMaxWidth, this.settings.iframeMaxHeight, src, currentGalleryItem.iframeTitle);\r\n                $currentSlide.prepend(markup);\r\n            }\r\n            else if (poster) {\r\n                var dummyImg = '';\r\n                var hasStartAnimation = isFirstSlide &&\r\n                    this.zoomFromOrigin &&\r\n                    this.currentImageSize;\r\n                if (hasStartAnimation) {\r\n                    dummyImg = this.getDummyImageContent($currentSlide, index, '');\r\n                }\r\n                var markup = utils.getVideoPosterMarkup(poster, dummyImg || '', lgVideoStyle, this.settings.strings['playVideo'], videoInfo);\r\n                $currentSlide.prepend(markup);\r\n            }\r\n            else if (videoInfo) {\r\n                var markup = \"<div class=\\\"lg-video-cont \\\" style=\\\"\" + lgVideoStyle + \"\\\"></div>\";\r\n                $currentSlide.prepend(markup);\r\n            }\r\n            else {\r\n                this.setImgMarkup(src, $currentSlide, index);\r\n                if (srcset || sources) {\r\n                    var $img = $currentSlide.find('.lg-object');\r\n                    this.initPictureFill($img);\r\n                }\r\n            }\r\n            if (poster || videoInfo) {\r\n                this.LGel.trigger(lGEvents.hasVideo, {\r\n                    index: index,\r\n                    src: src,\r\n                    html5Video: _html5Video,\r\n                    hasPoster: !!poster,\r\n                });\r\n            }\r\n            this.LGel.trigger(lGEvents.afterAppendSlide, { index: index });\r\n            if (this.lGalleryOn &&\r\n                this.settings.appendSubHtmlTo === '.lg-item') {\r\n                this.addHtml(index);\r\n            }\r\n        }\r\n        // For first time add some delay for displaying the start animation.\r\n        var _speed = 0;\r\n        // Do not change the delay value because it is required for zoom plugin.\r\n        // If gallery opened from direct url (hash) speed value should be 0\r\n        if (delay && !$LG(document.body).hasClass('lg-from-hash')) {\r\n            _speed = delay;\r\n        }\r\n        // Only for first slide and zoomFromOrigin is enabled\r\n        if (this.isFirstSlideWithZoomAnimation()) {\r\n            setTimeout(function () {\r\n                $currentSlide\r\n                    .removeClass('lg-start-end-progress lg-start-progress')\r\n                    .removeAttr('style');\r\n            }, this.settings.startAnimationDuration + 100);\r\n            if (!$currentSlide.hasClass('lg-loaded')) {\r\n                setTimeout(function () {\r\n                    if (_this.getSlideType(currentGalleryItem) === 'image') {\r\n                        var alt = currentGalleryItem.alt;\r\n                        var altAttr = alt ? 'alt=\"' + alt + '\"' : '';\r\n                        $currentSlide\r\n                            .find('.lg-img-wrap')\r\n                            .append(utils.getImgMarkup(index, src, altAttr, srcset, sizes, currentGalleryItem.sources));\r\n                        if (srcset || sources) {\r\n                            var $img = $currentSlide.find('.lg-object');\r\n                            _this.initPictureFill($img);\r\n                        }\r\n                    }\r\n                    if (_this.getSlideType(currentGalleryItem) === 'image' ||\r\n                        (_this.getSlideType(currentGalleryItem) === 'video' &&\r\n                            poster)) {\r\n                        _this.onLgObjectLoad($currentSlide, index, delay, _speed, true, false);\r\n                        // load remaining slides once the slide is completely loaded\r\n                        _this.onSlideObjectLoad($currentSlide, !!(videoInfo && videoInfo.html5 && !poster), function () {\r\n                            _this.loadContentOnFirstSlideLoad(index, $currentSlide, _speed);\r\n                        }, function () {\r\n                            _this.loadContentOnFirstSlideLoad(index, $currentSlide, _speed);\r\n                        });\r\n                    }\r\n                }, this.settings.startAnimationDuration + 100);\r\n            }\r\n        }\r\n        // SLide content has been added to dom\r\n        $currentSlide.addClass('lg-loaded');\r\n        if (!this.isFirstSlideWithZoomAnimation() ||\r\n            (this.getSlideType(currentGalleryItem) === 'video' && !poster)) {\r\n            this.onLgObjectLoad($currentSlide, index, delay, _speed, isFirstSlide, !!(videoInfo && videoInfo.html5 && !poster));\r\n        }\r\n        // When gallery is opened once content is loaded (second time) need to add lg-complete class for css styling\r\n        if ((!this.zoomFromOrigin || !this.currentImageSize) &&\r\n            $currentSlide.hasClass('lg-complete_') &&\r\n            !this.lGalleryOn) {\r\n            setTimeout(function () {\r\n                $currentSlide.addClass('lg-complete');\r\n            }, this.settings.backdropDuration);\r\n        }\r\n        // Content loaded\r\n        // Need to set lGalleryOn before calling preload function\r\n        this.lGalleryOn = true;\r\n        if (rec === true) {\r\n            if (!$currentSlide.hasClass('lg-complete_')) {\r\n                $currentSlide\r\n                    .find('.lg-object')\r\n                    .first()\r\n                    .on('load.lg error.lg', function () {\r\n                    _this.preload(index);\r\n                });\r\n            }\r\n            else {\r\n                this.preload(index);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * @desc Remove dummy image content and load next slides\r\n     * Called only for the first time if zoomFromOrigin animation is enabled\r\n     * @param index\r\n     * @param $currentSlide\r\n     * @param speed\r\n     */\r\n    LightGallery.prototype.loadContentOnFirstSlideLoad = function (index, $currentSlide, speed) {\r\n        var _this = this;\r\n        setTimeout(function () {\r\n            $currentSlide.find('.lg-dummy-img').remove();\r\n            $currentSlide.removeClass('lg-first-slide');\r\n            _this.outer.removeClass('lg-first-slide-loading');\r\n            _this.isDummyImageRemoved = true;\r\n            _this.preload(index);\r\n        }, speed + 300);\r\n    };\r\n    LightGallery.prototype.getItemsToBeInsertedToDom = function (index, prevIndex, numberOfItems) {\r\n        var _this = this;\r\n        if (numberOfItems === void 0) { numberOfItems = 0; }\r\n        var itemsToBeInsertedToDom = [];\r\n        // Minimum 2 items should be there\r\n        var possibleNumberOfItems = Math.max(numberOfItems, 3);\r\n        possibleNumberOfItems = Math.min(possibleNumberOfItems, this.galleryItems.length);\r\n        var prevIndexItem = \"lg-item-\" + this.lgId + \"-\" + prevIndex;\r\n        if (this.galleryItems.length <= 3) {\r\n            this.galleryItems.forEach(function (_element, index) {\r\n                itemsToBeInsertedToDom.push(\"lg-item-\" + _this.lgId + \"-\" + index);\r\n            });\r\n            return itemsToBeInsertedToDom;\r\n        }\r\n        if (index < (this.galleryItems.length - 1) / 2) {\r\n            for (var idx = index; idx > index - possibleNumberOfItems / 2 && idx >= 0; idx--) {\r\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + idx);\r\n            }\r\n            var numberOfExistingItems = itemsToBeInsertedToDom.length;\r\n            for (var idx = 0; idx < possibleNumberOfItems - numberOfExistingItems; idx++) {\r\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + (index + idx + 1));\r\n            }\r\n        }\r\n        else {\r\n            for (var idx = index; idx <= this.galleryItems.length - 1 &&\r\n                idx < index + possibleNumberOfItems / 2; idx++) {\r\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + idx);\r\n            }\r\n            var numberOfExistingItems = itemsToBeInsertedToDom.length;\r\n            for (var idx = 0; idx < possibleNumberOfItems - numberOfExistingItems; idx++) {\r\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + (index - idx - 1));\r\n            }\r\n        }\r\n        if (this.settings.loop) {\r\n            if (index === this.galleryItems.length - 1) {\r\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + 0);\r\n            }\r\n            else if (index === 0) {\r\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + (this.galleryItems.length - 1));\r\n            }\r\n        }\r\n        if (itemsToBeInsertedToDom.indexOf(prevIndexItem) === -1) {\r\n            itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + prevIndex);\r\n        }\r\n        return itemsToBeInsertedToDom;\r\n    };\r\n    LightGallery.prototype.organizeSlideItems = function (index, prevIndex) {\r\n        var _this = this;\r\n        var itemsToBeInsertedToDom = this.getItemsToBeInsertedToDom(index, prevIndex, this.settings.numberOfSlideItemsInDom);\r\n        itemsToBeInsertedToDom.forEach(function (item) {\r\n            if (_this.currentItemsInDom.indexOf(item) === -1) {\r\n                _this.$inner.append(\"<div id=\\\"\" + item + \"\\\" class=\\\"lg-item\\\"></div>\");\r\n            }\r\n        });\r\n        this.currentItemsInDom.forEach(function (item) {\r\n            if (itemsToBeInsertedToDom.indexOf(item) === -1) {\r\n                $LG(\"#\" + item).remove();\r\n            }\r\n        });\r\n        return itemsToBeInsertedToDom;\r\n    };\r\n    /**\r\n     * Get previous index of the slide\r\n     */\r\n    LightGallery.prototype.getPreviousSlideIndex = function () {\r\n        var prevIndex = 0;\r\n        try {\r\n            var currentItemId = this.outer\r\n                .find('.lg-current')\r\n                .first()\r\n                .attr('id');\r\n            prevIndex = parseInt(currentItemId.split('-')[3]) || 0;\r\n        }\r\n        catch (error) {\r\n            prevIndex = 0;\r\n        }\r\n        return prevIndex;\r\n    };\r\n    LightGallery.prototype.setDownloadValue = function (index) {\r\n        if (this.settings.download) {\r\n            var currentGalleryItem = this.galleryItems[index];\r\n            var hideDownloadBtn = currentGalleryItem.downloadUrl === false ||\r\n                currentGalleryItem.downloadUrl === 'false';\r\n            if (hideDownloadBtn) {\r\n                this.outer.addClass('lg-hide-download');\r\n            }\r\n            else {\r\n                var $download = this.getElementById('lg-download');\r\n                this.outer.removeClass('lg-hide-download');\r\n                $download.attr('href', currentGalleryItem.downloadUrl ||\r\n                    currentGalleryItem.src);\r\n                if (currentGalleryItem.download) {\r\n                    $download.attr('download', currentGalleryItem.download);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    LightGallery.prototype.makeSlideAnimation = function (direction, currentSlideItem, previousSlideItem) {\r\n        var _this = this;\r\n        if (this.lGalleryOn) {\r\n            previousSlideItem.addClass('lg-slide-progress');\r\n        }\r\n        setTimeout(function () {\r\n            // remove all transitions\r\n            _this.outer.addClass('lg-no-trans');\r\n            _this.outer\r\n                .find('.lg-item')\r\n                .removeClass('lg-prev-slide lg-next-slide');\r\n            if (direction === 'prev') {\r\n                //prevslide\r\n                currentSlideItem.addClass('lg-prev-slide');\r\n                previousSlideItem.addClass('lg-next-slide');\r\n            }\r\n            else {\r\n                // next slide\r\n                currentSlideItem.addClass('lg-next-slide');\r\n                previousSlideItem.addClass('lg-prev-slide');\r\n            }\r\n            // give 50 ms for browser to add/remove class\r\n            setTimeout(function () {\r\n                _this.outer.find('.lg-item').removeClass('lg-current');\r\n                currentSlideItem.addClass('lg-current');\r\n                // reset all transitions\r\n                _this.outer.removeClass('lg-no-trans');\r\n            }, 50);\r\n        }, this.lGalleryOn ? this.settings.slideDelay : 0);\r\n    };\r\n    /**\r\n     * Goto a specific slide.\r\n     * @param {Number} index - index of the slide\r\n     * @param {Boolean} fromTouch - true if slide function called via touch event or mouse drag\r\n     * @param {Boolean} fromThumb - true if slide function called via thumbnail click\r\n     * @param {String} direction - Direction of the slide(next/prev)\r\n     * @category lGPublicMethods\r\n     * @example\r\n     *  const plugin = lightGallery();\r\n     *  // to go to 3rd slide\r\n     *  plugin.slide(2);\r\n     *\r\n     */\r\n    LightGallery.prototype.slide = function (index, fromTouch, fromThumb, direction) {\r\n        var _this = this;\r\n        var prevIndex = this.getPreviousSlideIndex();\r\n        this.currentItemsInDom = this.organizeSlideItems(index, prevIndex);\r\n        // Prevent multiple call, Required for hsh plugin\r\n        if (this.lGalleryOn && prevIndex === index) {\r\n            return;\r\n        }\r\n        var numberOfGalleryItems = this.galleryItems.length;\r\n        if (!this.lgBusy) {\r\n            if (this.settings.counter) {\r\n                this.updateCurrentCounter(index);\r\n            }\r\n            var currentSlideItem = this.getSlideItem(index);\r\n            var previousSlideItem_1 = this.getSlideItem(prevIndex);\r\n            var currentGalleryItem = this.galleryItems[index];\r\n            var videoInfo = currentGalleryItem.__slideVideoInfo;\r\n            this.outer.attr('data-lg-slide-type', this.getSlideType(currentGalleryItem));\r\n            this.setDownloadValue(index);\r\n            if (videoInfo) {\r\n                var _a = this.mediaContainerPosition, top_3 = _a.top, bottom = _a.bottom;\r\n                var videoSize = utils.getSize(this.items[index], this.outer, top_3 + bottom, videoInfo && this.settings.videoMaxSize);\r\n                this.resizeVideoSlide(index, videoSize);\r\n            }\r\n            this.LGel.trigger(lGEvents.beforeSlide, {\r\n                prevIndex: prevIndex,\r\n                index: index,\r\n                fromTouch: !!fromTouch,\r\n                fromThumb: !!fromThumb,\r\n            });\r\n            this.lgBusy = true;\r\n            clearTimeout(this.hideBarTimeout);\r\n            this.arrowDisable(index);\r\n            if (!direction) {\r\n                if (index < prevIndex) {\r\n                    direction = 'prev';\r\n                }\r\n                else if (index > prevIndex) {\r\n                    direction = 'next';\r\n                }\r\n            }\r\n            if (!fromTouch) {\r\n                this.makeSlideAnimation(direction, currentSlideItem, previousSlideItem_1);\r\n            }\r\n            else {\r\n                this.outer\r\n                    .find('.lg-item')\r\n                    .removeClass('lg-prev-slide lg-current lg-next-slide');\r\n                var touchPrev = void 0;\r\n                var touchNext = void 0;\r\n                if (numberOfGalleryItems > 2) {\r\n                    touchPrev = index - 1;\r\n                    touchNext = index + 1;\r\n                    if (index === 0 && prevIndex === numberOfGalleryItems - 1) {\r\n                        // next slide\r\n                        touchNext = 0;\r\n                        touchPrev = numberOfGalleryItems - 1;\r\n                    }\r\n                    else if (index === numberOfGalleryItems - 1 &&\r\n                        prevIndex === 0) {\r\n                        // prev slide\r\n                        touchNext = 0;\r\n                        touchPrev = numberOfGalleryItems - 1;\r\n                    }\r\n                }\r\n                else {\r\n                    touchPrev = 0;\r\n                    touchNext = 1;\r\n                }\r\n                if (direction === 'prev') {\r\n                    this.getSlideItem(touchNext).addClass('lg-next-slide');\r\n                }\r\n                else {\r\n                    this.getSlideItem(touchPrev).addClass('lg-prev-slide');\r\n                }\r\n                currentSlideItem.addClass('lg-current');\r\n            }\r\n            // Do not put load content in set timeout as it needs to load immediately when the gallery is opened\r\n            if (!this.lGalleryOn) {\r\n                this.loadContent(index, true);\r\n            }\r\n            else {\r\n                setTimeout(function () {\r\n                    _this.loadContent(index, true);\r\n                    // Add title if this.settings.appendSubHtmlTo === lg-sub-html\r\n                    if (_this.settings.appendSubHtmlTo !== '.lg-item') {\r\n                        _this.addHtml(index);\r\n                    }\r\n                }, this.settings.speed + 50 + (fromTouch ? 0 : this.settings.slideDelay));\r\n            }\r\n            setTimeout(function () {\r\n                _this.lgBusy = false;\r\n                previousSlideItem_1.removeClass('lg-slide-progress');\r\n                _this.LGel.trigger(lGEvents.afterSlide, {\r\n                    prevIndex: prevIndex,\r\n                    index: index,\r\n                    fromTouch: fromTouch,\r\n                    fromThumb: fromThumb,\r\n                });\r\n            }, (this.lGalleryOn ? this.settings.speed + 100 : 100) + (fromTouch ? 0 : this.settings.slideDelay));\r\n        }\r\n        this.index = index;\r\n    };\r\n    LightGallery.prototype.updateCurrentCounter = function (index) {\r\n        this.getElementById('lg-counter-current').html(index + 1 + '');\r\n    };\r\n    LightGallery.prototype.updateCounterTotal = function () {\r\n        this.getElementById('lg-counter-all').html(this.galleryItems.length + '');\r\n    };\r\n    LightGallery.prototype.getSlideType = function (item) {\r\n        if (item.__slideVideoInfo) {\r\n            return 'video';\r\n        }\r\n        else if (item.iframe) {\r\n            return 'iframe';\r\n        }\r\n        else {\r\n            return 'image';\r\n        }\r\n    };\r\n    LightGallery.prototype.touchMove = function (startCoords, endCoords, e) {\r\n        var distanceX = endCoords.pageX - startCoords.pageX;\r\n        var distanceY = endCoords.pageY - startCoords.pageY;\r\n        var allowSwipe = false;\r\n        if (this.swipeDirection) {\r\n            allowSwipe = true;\r\n        }\r\n        else {\r\n            if (Math.abs(distanceX) > 15) {\r\n                this.swipeDirection = 'horizontal';\r\n                allowSwipe = true;\r\n            }\r\n            else if (Math.abs(distanceY) > 15) {\r\n                this.swipeDirection = 'vertical';\r\n                allowSwipe = true;\r\n            }\r\n        }\r\n        if (!allowSwipe) {\r\n            return;\r\n        }\r\n        var $currentSlide = this.getSlideItem(this.index);\r\n        if (this.swipeDirection === 'horizontal') {\r\n            e === null || e === void 0 ? void 0 : e.preventDefault();\r\n            // reset opacity and transition duration\r\n            this.outer.addClass('lg-dragging');\r\n            // move current slide\r\n            this.setTranslate($currentSlide, distanceX, 0);\r\n            // move next and prev slide with current slide\r\n            var width = $currentSlide.get().offsetWidth;\r\n            var slideWidthAmount = (width * 15) / 100;\r\n            var gutter = slideWidthAmount - Math.abs((distanceX * 10) / 100);\r\n            this.setTranslate(this.outer.find('.lg-prev-slide').first(), -width + distanceX - gutter, 0);\r\n            this.setTranslate(this.outer.find('.lg-next-slide').first(), width + distanceX + gutter, 0);\r\n        }\r\n        else if (this.swipeDirection === 'vertical') {\r\n            if (this.settings.swipeToClose) {\r\n                e === null || e === void 0 ? void 0 : e.preventDefault();\r\n                this.$container.addClass('lg-dragging-vertical');\r\n                var opacity = 1 - Math.abs(distanceY) / window.innerHeight;\r\n                this.$backdrop.css('opacity', opacity);\r\n                var scale = 1 - Math.abs(distanceY) / (window.innerWidth * 2);\r\n                this.setTranslate($currentSlide, 0, distanceY, scale, scale);\r\n                if (Math.abs(distanceY) > 100) {\r\n                    this.outer\r\n                        .addClass('lg-hide-items')\r\n                        .removeClass('lg-components-open');\r\n                }\r\n            }\r\n        }\r\n    };\r\n    LightGallery.prototype.touchEnd = function (endCoords, startCoords, event) {\r\n        var _this = this;\r\n        var distance;\r\n        // keep slide animation for any mode while dragg/swipe\r\n        if (this.settings.mode !== 'lg-slide') {\r\n            this.outer.addClass('lg-slide');\r\n        }\r\n        // set transition duration\r\n        setTimeout(function () {\r\n            _this.$container.removeClass('lg-dragging-vertical');\r\n            _this.outer\r\n                .removeClass('lg-dragging lg-hide-items')\r\n                .addClass('lg-components-open');\r\n            var triggerClick = true;\r\n            if (_this.swipeDirection === 'horizontal') {\r\n                distance = endCoords.pageX - startCoords.pageX;\r\n                var distanceAbs = Math.abs(endCoords.pageX - startCoords.pageX);\r\n                if (distance < 0 &&\r\n                    distanceAbs > _this.settings.swipeThreshold) {\r\n                    _this.goToNextSlide(true);\r\n                    triggerClick = false;\r\n                }\r\n                else if (distance > 0 &&\r\n                    distanceAbs > _this.settings.swipeThreshold) {\r\n                    _this.goToPrevSlide(true);\r\n                    triggerClick = false;\r\n                }\r\n            }\r\n            else if (_this.swipeDirection === 'vertical') {\r\n                distance = Math.abs(endCoords.pageY - startCoords.pageY);\r\n                if (_this.settings.closable &&\r\n                    _this.settings.swipeToClose &&\r\n                    distance > 100) {\r\n                    _this.closeGallery();\r\n                    return;\r\n                }\r\n                else {\r\n                    _this.$backdrop.css('opacity', 1);\r\n                }\r\n            }\r\n            _this.outer.find('.lg-item').removeAttr('style');\r\n            if (triggerClick &&\r\n                Math.abs(endCoords.pageX - startCoords.pageX) < 5) {\r\n                // Trigger click if distance is less than 5 pix\r\n                var target = $LG(event.target);\r\n                if (_this.isPosterElement(target)) {\r\n                    _this.LGel.trigger(lGEvents.posterClick);\r\n                }\r\n            }\r\n            _this.swipeDirection = undefined;\r\n        });\r\n        // remove slide class once drag/swipe is completed if mode is not slide\r\n        setTimeout(function () {\r\n            if (!_this.outer.hasClass('lg-dragging') &&\r\n                _this.settings.mode !== 'lg-slide') {\r\n                _this.outer.removeClass('lg-slide');\r\n            }\r\n        }, this.settings.speed + 100);\r\n    };\r\n    LightGallery.prototype.enableSwipe = function () {\r\n        var _this = this;\r\n        var startCoords = {};\r\n        var endCoords = {};\r\n        var isMoved = false;\r\n        var isSwiping = false;\r\n        if (this.settings.enableSwipe) {\r\n            this.$inner.on('touchstart.lg', function (e) {\r\n                _this.dragOrSwipeEnabled = true;\r\n                var $item = _this.getSlideItem(_this.index);\r\n                if (($LG(e.target).hasClass('lg-item') ||\r\n                    $item.get().contains(e.target)) &&\r\n                    !_this.outer.hasClass('lg-zoomed') &&\r\n                    !_this.lgBusy &&\r\n                    e.touches.length === 1) {\r\n                    isSwiping = true;\r\n                    _this.touchAction = 'swipe';\r\n                    _this.manageSwipeClass();\r\n                    startCoords = {\r\n                        pageX: e.touches[0].pageX,\r\n                        pageY: e.touches[0].pageY,\r\n                    };\r\n                }\r\n            });\r\n            this.$inner.on('touchmove.lg', function (e) {\r\n                if (isSwiping &&\r\n                    _this.touchAction === 'swipe' &&\r\n                    e.touches.length === 1) {\r\n                    endCoords = {\r\n                        pageX: e.touches[0].pageX,\r\n                        pageY: e.touches[0].pageY,\r\n                    };\r\n                    _this.touchMove(startCoords, endCoords, e);\r\n                    isMoved = true;\r\n                }\r\n            });\r\n            this.$inner.on('touchend.lg', function (event) {\r\n                if (_this.touchAction === 'swipe') {\r\n                    if (isMoved) {\r\n                        isMoved = false;\r\n                        _this.touchEnd(endCoords, startCoords, event);\r\n                    }\r\n                    else if (isSwiping) {\r\n                        var target = $LG(event.target);\r\n                        if (_this.isPosterElement(target)) {\r\n                            _this.LGel.trigger(lGEvents.posterClick);\r\n                        }\r\n                    }\r\n                    _this.touchAction = undefined;\r\n                    isSwiping = false;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    LightGallery.prototype.enableDrag = function () {\r\n        var _this = this;\r\n        var startCoords = {};\r\n        var endCoords = {};\r\n        var isDraging = false;\r\n        var isMoved = false;\r\n        if (this.settings.enableDrag) {\r\n            this.outer.on('mousedown.lg', function (e) {\r\n                _this.dragOrSwipeEnabled = true;\r\n                var $item = _this.getSlideItem(_this.index);\r\n                if ($LG(e.target).hasClass('lg-item') ||\r\n                    $item.get().contains(e.target)) {\r\n                    if (!_this.outer.hasClass('lg-zoomed') && !_this.lgBusy) {\r\n                        e.preventDefault();\r\n                        if (!_this.lgBusy) {\r\n                            _this.manageSwipeClass();\r\n                            startCoords = {\r\n                                pageX: e.pageX,\r\n                                pageY: e.pageY,\r\n                            };\r\n                            isDraging = true;\r\n                            // ** Fix for webkit cursor issue https://code.google.com/p/chromium/issues/detail?id=26723\r\n                            _this.outer.get().scrollLeft += 1;\r\n                            _this.outer.get().scrollLeft -= 1;\r\n                            // *\r\n                            _this.outer\r\n                                .removeClass('lg-grab')\r\n                                .addClass('lg-grabbing');\r\n                            _this.LGel.trigger(lGEvents.dragStart);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            $LG(window).on(\"mousemove.lg.global\" + this.lgId, function (e) {\r\n                if (isDraging && _this.lgOpened) {\r\n                    isMoved = true;\r\n                    endCoords = {\r\n                        pageX: e.pageX,\r\n                        pageY: e.pageY,\r\n                    };\r\n                    _this.touchMove(startCoords, endCoords);\r\n                    _this.LGel.trigger(lGEvents.dragMove);\r\n                }\r\n            });\r\n            $LG(window).on(\"mouseup.lg.global\" + this.lgId, function (event) {\r\n                if (!_this.lgOpened) {\r\n                    return;\r\n                }\r\n                var target = $LG(event.target);\r\n                if (isMoved) {\r\n                    isMoved = false;\r\n                    _this.touchEnd(endCoords, startCoords, event);\r\n                    _this.LGel.trigger(lGEvents.dragEnd);\r\n                }\r\n                else if (_this.isPosterElement(target)) {\r\n                    _this.LGel.trigger(lGEvents.posterClick);\r\n                }\r\n                // Prevent execution on click\r\n                if (isDraging) {\r\n                    isDraging = false;\r\n                    _this.outer.removeClass('lg-grabbing').addClass('lg-grab');\r\n                }\r\n            });\r\n        }\r\n    };\r\n    LightGallery.prototype.triggerPosterClick = function () {\r\n        var _this = this;\r\n        this.$inner.on('click.lg', function (event) {\r\n            if (!_this.dragOrSwipeEnabled &&\r\n                _this.isPosterElement($LG(event.target))) {\r\n                _this.LGel.trigger(lGEvents.posterClick);\r\n            }\r\n        });\r\n    };\r\n    LightGallery.prototype.manageSwipeClass = function () {\r\n        var _touchNext = this.index + 1;\r\n        var _touchPrev = this.index - 1;\r\n        if (this.settings.loop && this.galleryItems.length > 2) {\r\n            if (this.index === 0) {\r\n                _touchPrev = this.galleryItems.length - 1;\r\n            }\r\n            else if (this.index === this.galleryItems.length - 1) {\r\n                _touchNext = 0;\r\n            }\r\n        }\r\n        this.outer.find('.lg-item').removeClass('lg-next-slide lg-prev-slide');\r\n        if (_touchPrev > -1) {\r\n            this.getSlideItem(_touchPrev).addClass('lg-prev-slide');\r\n        }\r\n        this.getSlideItem(_touchNext).addClass('lg-next-slide');\r\n    };\r\n    /**\r\n     * Go to next slide\r\n     * @param {Boolean} fromTouch - true if slide function called via touch event\r\n     * @category lGPublicMethods\r\n     * @example\r\n     *  const plugin = lightGallery();\r\n     *  plugin.goToNextSlide();\r\n     * @see <a href=\"/demos/methods/\">Demo</a>\r\n     */\r\n    LightGallery.prototype.goToNextSlide = function (fromTouch) {\r\n        var _this = this;\r\n        var _loop = this.settings.loop;\r\n        if (fromTouch && this.galleryItems.length < 3) {\r\n            _loop = false;\r\n        }\r\n        if (!this.lgBusy) {\r\n            if (this.index + 1 < this.galleryItems.length) {\r\n                this.index++;\r\n                this.LGel.trigger(lGEvents.beforeNextSlide, {\r\n                    index: this.index,\r\n                });\r\n                this.slide(this.index, !!fromTouch, false, 'next');\r\n            }\r\n            else {\r\n                if (_loop) {\r\n                    this.index = 0;\r\n                    this.LGel.trigger(lGEvents.beforeNextSlide, {\r\n                        index: this.index,\r\n                    });\r\n                    this.slide(this.index, !!fromTouch, false, 'next');\r\n                }\r\n                else if (this.settings.slideEndAnimation && !fromTouch) {\r\n                    this.outer.addClass('lg-right-end');\r\n                    setTimeout(function () {\r\n                        _this.outer.removeClass('lg-right-end');\r\n                    }, 400);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Go to previous slides\r\n     * @param {Boolean} fromTouch - true if slide function called via touch event\r\n     * @category lGPublicMethods\r\n     * @example\r\n     *  const plugin = lightGallery({});\r\n     *  plugin.goToPrevSlide();\r\n     * @see <a href=\"/demos/methods/\">Demo</a>\r\n     *\r\n     */\r\n    LightGallery.prototype.goToPrevSlide = function (fromTouch) {\r\n        var _this = this;\r\n        var _loop = this.settings.loop;\r\n        if (fromTouch && this.galleryItems.length < 3) {\r\n            _loop = false;\r\n        }\r\n        if (!this.lgBusy) {\r\n            if (this.index > 0) {\r\n                this.index--;\r\n                this.LGel.trigger(lGEvents.beforePrevSlide, {\r\n                    index: this.index,\r\n                    fromTouch: fromTouch,\r\n                });\r\n                this.slide(this.index, !!fromTouch, false, 'prev');\r\n            }\r\n            else {\r\n                if (_loop) {\r\n                    this.index = this.galleryItems.length - 1;\r\n                    this.LGel.trigger(lGEvents.beforePrevSlide, {\r\n                        index: this.index,\r\n                        fromTouch: fromTouch,\r\n                    });\r\n                    this.slide(this.index, !!fromTouch, false, 'prev');\r\n                }\r\n                else if (this.settings.slideEndAnimation && !fromTouch) {\r\n                    this.outer.addClass('lg-left-end');\r\n                    setTimeout(function () {\r\n                        _this.outer.removeClass('lg-left-end');\r\n                    }, 400);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    LightGallery.prototype.keyPress = function () {\r\n        var _this = this;\r\n        $LG(window).on(\"keydown.lg.global\" + this.lgId, function (e) {\r\n            if (_this.lgOpened &&\r\n                _this.settings.escKey === true &&\r\n                e.keyCode === 27) {\r\n                e.preventDefault();\r\n                if (_this.settings.allowMediaOverlap &&\r\n                    _this.outer.hasClass('lg-can-toggle') &&\r\n                    _this.outer.hasClass('lg-components-open')) {\r\n                    _this.outer.removeClass('lg-components-open');\r\n                }\r\n                else {\r\n                    _this.closeGallery();\r\n                }\r\n            }\r\n            if (_this.lgOpened && _this.galleryItems.length > 1) {\r\n                if (e.keyCode === 37) {\r\n                    e.preventDefault();\r\n                    _this.goToPrevSlide();\r\n                }\r\n                if (e.keyCode === 39) {\r\n                    e.preventDefault();\r\n                    _this.goToNextSlide();\r\n                }\r\n            }\r\n        });\r\n    };\r\n    LightGallery.prototype.arrow = function () {\r\n        var _this = this;\r\n        this.getElementById('lg-prev').on('click.lg', function () {\r\n            _this.goToPrevSlide();\r\n        });\r\n        this.getElementById('lg-next').on('click.lg', function () {\r\n            _this.goToNextSlide();\r\n        });\r\n    };\r\n    LightGallery.prototype.arrowDisable = function (index) {\r\n        // Disable arrows if settings.hideControlOnEnd is true\r\n        if (!this.settings.loop && this.settings.hideControlOnEnd) {\r\n            var $prev = this.getElementById('lg-prev');\r\n            var $next = this.getElementById('lg-next');\r\n            if (index + 1 === this.galleryItems.length) {\r\n                $next.attr('disabled', 'disabled').addClass('disabled');\r\n            }\r\n            else {\r\n                $next.removeAttr('disabled').removeClass('disabled');\r\n            }\r\n            if (index === 0) {\r\n                $prev.attr('disabled', 'disabled').addClass('disabled');\r\n            }\r\n            else {\r\n                $prev.removeAttr('disabled').removeClass('disabled');\r\n            }\r\n        }\r\n    };\r\n    LightGallery.prototype.setTranslate = function ($el, xValue, yValue, scaleX, scaleY) {\r\n        if (scaleX === void 0) { scaleX = 1; }\r\n        if (scaleY === void 0) { scaleY = 1; }\r\n        $el.css('transform', 'translate3d(' +\r\n            xValue +\r\n            'px, ' +\r\n            yValue +\r\n            'px, 0px) scale3d(' +\r\n            scaleX +\r\n            ', ' +\r\n            scaleY +\r\n            ', 1)');\r\n    };\r\n    LightGallery.prototype.mousewheel = function () {\r\n        var _this = this;\r\n        var lastCall = 0;\r\n        this.outer.on('wheel.lg', function (e) {\r\n            if (!e.deltaY || _this.galleryItems.length < 2) {\r\n                return;\r\n            }\r\n            e.preventDefault();\r\n            var now = new Date().getTime();\r\n            if (now - lastCall < 1000) {\r\n                return;\r\n            }\r\n            lastCall = now;\r\n            if (e.deltaY > 0) {\r\n                _this.goToNextSlide();\r\n            }\r\n            else if (e.deltaY < 0) {\r\n                _this.goToPrevSlide();\r\n            }\r\n        });\r\n    };\r\n    LightGallery.prototype.isSlideElement = function (target) {\r\n        return (target.hasClass('lg-outer') ||\r\n            target.hasClass('lg-item') ||\r\n            target.hasClass('lg-img-wrap') ||\r\n            target.hasClass('lg-img-rotate'));\r\n    };\r\n    LightGallery.prototype.isPosterElement = function (target) {\r\n        var playButton = this.getSlideItem(this.index)\r\n            .find('.lg-video-play-button')\r\n            .get();\r\n        return (target.hasClass('lg-video-poster') ||\r\n            target.hasClass('lg-video-play-button') ||\r\n            (playButton && playButton.contains(target.get())));\r\n    };\r\n    /**\r\n     * Maximize minimize inline gallery.\r\n     * @category lGPublicMethods\r\n     */\r\n    LightGallery.prototype.toggleMaximize = function () {\r\n        var _this = this;\r\n        this.getElementById('lg-maximize').on('click.lg', function () {\r\n            _this.$container.toggleClass('lg-inline');\r\n            _this.refreshOnResize();\r\n        });\r\n    };\r\n    LightGallery.prototype.invalidateItems = function () {\r\n        for (var index = 0; index < this.items.length; index++) {\r\n            var element = this.items[index];\r\n            var $element = $LG(element);\r\n            $element.off(\"click.lgcustom-item-\" + $element.attr('data-lg-id'));\r\n        }\r\n    };\r\n    LightGallery.prototype.trapFocus = function () {\r\n        var _this = this;\r\n        this.$container.get().focus({\r\n            preventScroll: true,\r\n        });\r\n        $LG(window).on(\"keydown.lg.global\" + this.lgId, function (e) {\r\n            if (!_this.lgOpened) {\r\n                return;\r\n            }\r\n            var isTabPressed = e.key === 'Tab' || e.keyCode === 9;\r\n            if (!isTabPressed) {\r\n                return;\r\n            }\r\n            var focusableEls = utils.getFocusableElements(_this.$container.get());\r\n            var firstFocusableEl = focusableEls[0];\r\n            var lastFocusableEl = focusableEls[focusableEls.length - 1];\r\n            if (e.shiftKey) {\r\n                if (document.activeElement === firstFocusableEl) {\r\n                    lastFocusableEl.focus();\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n            else {\r\n                if (document.activeElement === lastFocusableEl) {\r\n                    firstFocusableEl.focus();\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n        });\r\n    };\r\n    LightGallery.prototype.manageCloseGallery = function () {\r\n        var _this = this;\r\n        if (!this.settings.closable)\r\n            return;\r\n        var mousedown = false;\r\n        this.getElementById('lg-close').on('click.lg', function () {\r\n            _this.closeGallery();\r\n        });\r\n        if (this.settings.closeOnTap) {\r\n            // If you drag the slide and release outside gallery gets close on chrome\r\n            // for preventing this check mousedown and mouseup happened on .lg-item or lg-outer\r\n            this.outer.on('mousedown.lg', function (e) {\r\n                var target = $LG(e.target);\r\n                if (_this.isSlideElement(target)) {\r\n                    mousedown = true;\r\n                }\r\n                else {\r\n                    mousedown = false;\r\n                }\r\n            });\r\n            this.outer.on('mousemove.lg', function () {\r\n                mousedown = false;\r\n            });\r\n            this.outer.on('mouseup.lg', function (e) {\r\n                var target = $LG(e.target);\r\n                if (_this.isSlideElement(target) && mousedown) {\r\n                    if (!_this.outer.hasClass('lg-dragging')) {\r\n                        _this.closeGallery();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Close lightGallery if it is opened.\r\n     *\r\n     * @description If closable is false in the settings, you need to pass true via closeGallery method to force close gallery\r\n     * @return returns the estimated time to close gallery completely including the close animation duration\r\n     * @category lGPublicMethods\r\n     * @example\r\n     *  const plugin = lightGallery();\r\n     *  plugin.closeGallery();\r\n     *\r\n     */\r\n    LightGallery.prototype.closeGallery = function (force) {\r\n        var _this = this;\r\n        if (!this.lgOpened || (!this.settings.closable && !force)) {\r\n            return 0;\r\n        }\r\n        this.LGel.trigger(lGEvents.beforeClose);\r\n        if (this.settings.resetScrollPosition && !this.settings.hideScrollbar) {\r\n            $LG(window).scrollTop(this.prevScrollTop);\r\n        }\r\n        var currentItem = this.items[this.index];\r\n        var transform;\r\n        if (this.zoomFromOrigin && currentItem) {\r\n            var _a = this.mediaContainerPosition, top_4 = _a.top, bottom = _a.bottom;\r\n            var _b = this.galleryItems[this.index], __slideVideoInfo = _b.__slideVideoInfo, poster = _b.poster;\r\n            var imageSize = utils.getSize(currentItem, this.outer, top_4 + bottom, __slideVideoInfo && poster && this.settings.videoMaxSize);\r\n            transform = utils.getTransform(currentItem, this.outer, top_4, bottom, imageSize);\r\n        }\r\n        if (this.zoomFromOrigin && transform) {\r\n            this.outer.addClass('lg-closing lg-zoom-from-image');\r\n            this.getSlideItem(this.index)\r\n                .addClass('lg-start-end-progress')\r\n                .css('transition-duration', this.settings.startAnimationDuration + 'ms')\r\n                .css('transform', transform);\r\n        }\r\n        else {\r\n            this.outer.addClass('lg-hide-items');\r\n            // lg-zoom-from-image is used for setting the opacity to 1 if zoomFromOrigin is true\r\n            // If the closing item doesn't have the lg-size attribute, remove this class to avoid the closing css conflicts\r\n            this.outer.removeClass('lg-zoom-from-image');\r\n        }\r\n        // Unbind all events added by lightGallery\r\n        // @todo\r\n        //this.$el.off('.lg.tm');\r\n        this.destroyModules();\r\n        this.lGalleryOn = false;\r\n        this.isDummyImageRemoved = false;\r\n        this.zoomFromOrigin = this.settings.zoomFromOrigin;\r\n        clearTimeout(this.hideBarTimeout);\r\n        this.hideBarTimeout = false;\r\n        $LG('html').removeClass('lg-on');\r\n        this.outer.removeClass('lg-visible lg-components-open');\r\n        // Resetting opacity to 0 isd required as  vertical swipe to close function adds inline opacity.\r\n        this.$backdrop.removeClass('in').css('opacity', 0);\r\n        var removeTimeout = this.zoomFromOrigin && transform\r\n            ? Math.max(this.settings.startAnimationDuration, this.settings.backdropDuration)\r\n            : this.settings.backdropDuration;\r\n        this.$container.removeClass('lg-show-in');\r\n        // Once the closign animation is completed and gallery is invisible\r\n        setTimeout(function () {\r\n            if (_this.zoomFromOrigin && transform) {\r\n                _this.outer.removeClass('lg-zoom-from-image');\r\n            }\r\n            _this.$container.removeClass('lg-show');\r\n            // Reset scrollbar\r\n            _this.resetScrollBar();\r\n            // Need to remove inline opacity as it is used in the stylesheet as well\r\n            _this.$backdrop\r\n                .removeAttr('style')\r\n                .css('transition-duration', _this.settings.backdropDuration + 'ms');\r\n            _this.outer.removeClass(\"lg-closing \" + _this.settings.startClass);\r\n            _this.getSlideItem(_this.index).removeClass('lg-start-end-progress');\r\n            _this.$inner.empty();\r\n            if (_this.lgOpened) {\r\n                _this.LGel.trigger(lGEvents.afterClose, {\r\n                    instance: _this,\r\n                });\r\n            }\r\n            if (_this.$container.get()) {\r\n                _this.$container.get().blur();\r\n            }\r\n            _this.lgOpened = false;\r\n        }, removeTimeout + 100);\r\n        return removeTimeout + 100;\r\n    };\r\n    LightGallery.prototype.initModules = function () {\r\n        this.plugins.forEach(function (module) {\r\n            try {\r\n                module.init();\r\n            }\r\n            catch (err) {\r\n                console.warn(\"lightGallery:- make sure lightGallery module is properly initiated\");\r\n            }\r\n        });\r\n    };\r\n    LightGallery.prototype.destroyModules = function (destroy) {\r\n        this.plugins.forEach(function (module) {\r\n            try {\r\n                if (destroy) {\r\n                    module.destroy();\r\n                }\r\n                else {\r\n                    module.closeGallery && module.closeGallery();\r\n                }\r\n            }\r\n            catch (err) {\r\n                console.warn(\"lightGallery:- make sure lightGallery module is properly destroyed\");\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Refresh lightGallery with new set of children.\r\n     *\r\n     * @description This is useful to update the gallery when the child elements are changed without calling destroy method.\r\n     *\r\n     * If you are using dynamic mode, you can pass the modified array of dynamicEl as the first parameter to refresh the dynamic gallery\r\n     * @see <a href=\"/demos/dynamic-mode/\">Demo</a>\r\n     * @category lGPublicMethods\r\n     * @example\r\n     *  const plugin = lightGallery();\r\n     *  // Delete or add children, then call\r\n     *  plugin.refresh();\r\n     *\r\n     */\r\n    LightGallery.prototype.refresh = function (galleryItems) {\r\n        if (!this.settings.dynamic) {\r\n            this.invalidateItems();\r\n        }\r\n        if (galleryItems) {\r\n            this.galleryItems = galleryItems;\r\n        }\r\n        else {\r\n            this.galleryItems = this.getItems();\r\n        }\r\n        this.updateControls();\r\n        this.openGalleryOnItemClick();\r\n        this.LGel.trigger(lGEvents.updateSlides);\r\n    };\r\n    LightGallery.prototype.updateControls = function () {\r\n        this.addSlideVideoInfo(this.galleryItems);\r\n        this.updateCounterTotal();\r\n        this.manageSingleSlideClassName();\r\n    };\r\n    LightGallery.prototype.destroyGallery = function () {\r\n        this.destroyModules(true);\r\n        if (!this.settings.dynamic) {\r\n            this.invalidateItems();\r\n        }\r\n        $LG(window).off(\".lg.global\" + this.lgId);\r\n        this.LGel.off('.lg');\r\n        this.$container.remove();\r\n    };\r\n    /**\r\n     * Destroy lightGallery.\r\n     * Destroy lightGallery and its plugin instances completely\r\n     *\r\n     * @description This method also calls CloseGallery function internally. Returns the time takes to completely close and destroy the instance.\r\n     * In case if you want to re-initialize lightGallery right after destroying it, initialize it only once the destroy process is completed.\r\n     * You can use refresh method most of the times.\r\n     * @category lGPublicMethods\r\n     * @example\r\n     *  const plugin = lightGallery();\r\n     *  plugin.destroy();\r\n     *\r\n     */\r\n    LightGallery.prototype.destroy = function () {\r\n        var closeTimeout = this.closeGallery(true);\r\n        if (closeTimeout) {\r\n            setTimeout(this.destroyGallery.bind(this), closeTimeout);\r\n        }\r\n        else {\r\n            this.destroyGallery();\r\n        }\r\n        return closeTimeout;\r\n    };\r\n    return LightGallery;\r\n}());\n\nfunction lightGallery(el, options) {\r\n    return new LightGallery(el, options);\r\n}\n\nexport default lightGallery;\n//# sourceMappingURL=lightgallery.es5.js.map\n","/*!\n * lightgallery | 2.9.0 | October 1st 2025\n * http://www.lightgalleryjs.com/\n * Copyright (c) 2020 Sachin Neravath;\n * @license GPLv3\n */\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar zoomSettings = {\r\n    scale: 1,\r\n    zoom: true,\r\n    infiniteZoom: true,\r\n    actualSize: true,\r\n    showZoomInOutIcons: false,\r\n    actualSizeIcons: {\r\n        zoomIn: 'lg-zoom-in',\r\n        zoomOut: 'lg-zoom-out',\r\n    },\r\n    enableZoomAfter: 300,\r\n    zoomPluginStrings: {\r\n        zoomIn: 'Zoom in',\r\n        zoomOut: 'Zoom out',\r\n        viewActualSize: 'View actual size',\r\n    },\r\n};\n\n/**\r\n * List of lightGallery events\r\n * All events should be documented here\r\n * Below interfaces are used to build the website documentations\r\n * */\r\nvar lGEvents = {\r\n    afterAppendSlide: 'lgAfterAppendSlide',\r\n    init: 'lgInit',\r\n    hasVideo: 'lgHasVideo',\r\n    containerResize: 'lgContainerResize',\r\n    updateSlides: 'lgUpdateSlides',\r\n    afterAppendSubHtml: 'lgAfterAppendSubHtml',\r\n    beforeOpen: 'lgBeforeOpen',\r\n    afterOpen: 'lgAfterOpen',\r\n    slideItemLoad: 'lgSlideItemLoad',\r\n    beforeSlide: 'lgBeforeSlide',\r\n    afterSlide: 'lgAfterSlide',\r\n    posterClick: 'lgPosterClick',\r\n    dragStart: 'lgDragStart',\r\n    dragMove: 'lgDragMove',\r\n    dragEnd: 'lgDragEnd',\r\n    beforeNextSlide: 'lgBeforeNextSlide',\r\n    beforePrevSlide: 'lgBeforePrevSlide',\r\n    beforeClose: 'lgBeforeClose',\r\n    afterClose: 'lgAfterClose',\r\n    rotateLeft: 'lgRotateLeft',\r\n    rotateRight: 'lgRotateRight',\r\n    flipHorizontal: 'lgFlipHorizontal',\r\n    flipVertical: 'lgFlipVertical',\r\n    autoplay: 'lgAutoplay',\r\n    autoplayStart: 'lgAutoplayStart',\r\n    autoplayStop: 'lgAutoplayStop',\r\n};\n\nvar ZOOM_TRANSITION_DURATION = 500;\r\nvar Zoom = /** @class */ (function () {\r\n    function Zoom(instance, $LG) {\r\n        // get lightGallery core plugin instance\r\n        this.core = instance;\r\n        this.$LG = $LG;\r\n        this.settings = __assign(__assign({}, zoomSettings), this.core.settings);\r\n        return this;\r\n    }\r\n    // Append Zoom controls. Actual size, Zoom-in, Zoom-out\r\n    Zoom.prototype.buildTemplates = function () {\r\n        var zoomIcons = this.settings.showZoomInOutIcons\r\n            ? \"<button id=\\\"\" + this.core.getIdName('lg-zoom-in') + \"\\\" type=\\\"button\\\" aria-label=\\\"\" + this.settings.zoomPluginStrings['zoomIn'] + \"\\\" class=\\\"lg-zoom-in lg-icon\\\"></button><button id=\\\"\" + this.core.getIdName('lg-zoom-out') + \"\\\" type=\\\"button\\\" aria-label=\\\"\" + this.settings.zoomPluginStrings['zoomOut'] + \"\\\" class=\\\"lg-zoom-out lg-icon\\\"></button>\"\r\n            : '';\r\n        if (this.settings.actualSize) {\r\n            zoomIcons += \"<button id=\\\"\" + this.core.getIdName('lg-actual-size') + \"\\\" type=\\\"button\\\" aria-label=\\\"\" + this.settings.zoomPluginStrings['viewActualSize'] + \"\\\" class=\\\"\" + this.settings.actualSizeIcons.zoomIn + \" lg-icon\\\"></button>\";\r\n        }\r\n        this.core.outer.addClass('lg-use-transition-for-zoom');\r\n        this.core.$toolbar.first().append(zoomIcons);\r\n    };\r\n    /**\r\n     * @desc Enable zoom option only once the image is completely loaded\r\n     * If zoomFromOrigin is true, Zoom is enabled once the dummy image has been inserted\r\n     *\r\n     * Zoom styles are defined under lg-zoomable CSS class.\r\n     */\r\n    Zoom.prototype.enableZoom = function (event) {\r\n        var _this = this;\r\n        // delay will be 0 except first time\r\n        var _speed = this.settings.enableZoomAfter + event.detail.delay;\r\n        // set _speed value 0 if gallery opened from direct url and if it is first slide\r\n        if (this.$LG('body').first().hasClass('lg-from-hash') &&\r\n            event.detail.delay) {\r\n            // will execute only once\r\n            _speed = 0;\r\n        }\r\n        else {\r\n            // Remove lg-from-hash to enable starting animation.\r\n            this.$LG('body').first().removeClass('lg-from-hash');\r\n        }\r\n        this.zoomableTimeout = setTimeout(function () {\r\n            if (!_this.isImageSlide(_this.core.index)) {\r\n                return;\r\n            }\r\n            _this.core.getSlideItem(event.detail.index).addClass('lg-zoomable');\r\n            if (event.detail.index === _this.core.index) {\r\n                _this.setZoomEssentials();\r\n            }\r\n        }, _speed + 30);\r\n    };\r\n    Zoom.prototype.enableZoomOnSlideItemLoad = function () {\r\n        // Add zoomable class\r\n        this.core.LGel.on(lGEvents.slideItemLoad + \".zoom\", this.enableZoom.bind(this));\r\n    };\r\n    Zoom.prototype.getDragCords = function (e) {\r\n        return {\r\n            x: e.pageX,\r\n            y: e.pageY,\r\n        };\r\n    };\r\n    Zoom.prototype.getSwipeCords = function (e) {\r\n        var x = e.touches[0].pageX;\r\n        var y = e.touches[0].pageY;\r\n        return {\r\n            x: x,\r\n            y: y,\r\n        };\r\n    };\r\n    Zoom.prototype.getDragAllowedAxises = function (scale, scaleDiff) {\r\n        if (!this.containerRect) {\r\n            return {\r\n                allowX: false,\r\n                allowY: false,\r\n            };\r\n        }\r\n        var $image = this.core\r\n            .getSlideItem(this.core.index)\r\n            .find('.lg-image')\r\n            .first()\r\n            .get();\r\n        var height = 0;\r\n        var width = 0;\r\n        var rect = $image.getBoundingClientRect();\r\n        if (scale) {\r\n            height = $image.offsetHeight * scale;\r\n            width = $image.offsetWidth * scale;\r\n        }\r\n        else if (scaleDiff) {\r\n            height = rect.height + scaleDiff * rect.height;\r\n            width = rect.width + scaleDiff * rect.width;\r\n        }\r\n        else {\r\n            height = rect.height;\r\n            width = rect.width;\r\n        }\r\n        var allowY = height > this.containerRect.height;\r\n        var allowX = width > this.containerRect.width;\r\n        return {\r\n            allowX: allowX,\r\n            allowY: allowY,\r\n        };\r\n    };\r\n    Zoom.prototype.setZoomEssentials = function () {\r\n        this.containerRect = this.core.$content.get().getBoundingClientRect();\r\n    };\r\n    /**\r\n     * @desc Image zoom\r\n     * Translate the wrap and scale the image to get better user experience\r\n     *\r\n     * @param {String} scale - Zoom decrement/increment value\r\n     */\r\n    Zoom.prototype.zoomImage = function (scale, scaleDiff, reposition, resetToMax) {\r\n        if (!this.containerRect || Math.abs(scaleDiff) <= 0)\r\n            return;\r\n        var offsetX = this.containerRect.width / 2 + this.containerRect.left;\r\n        var offsetY = this.containerRect.height / 2 +\r\n            this.containerRect.top +\r\n            this.scrollTop;\r\n        var originalX;\r\n        var originalY;\r\n        if (scale === 1) {\r\n            this.positionChanged = false;\r\n        }\r\n        var dragAllowedAxises = this.getDragAllowedAxises(0, scaleDiff);\r\n        var allowY = dragAllowedAxises.allowY, allowX = dragAllowedAxises.allowX;\r\n        if (this.positionChanged) {\r\n            originalX = this.left / (this.scale - scaleDiff);\r\n            originalY = this.top / (this.scale - scaleDiff);\r\n            this.pageX = offsetX - originalX;\r\n            this.pageY = offsetY - originalY;\r\n            this.positionChanged = false;\r\n        }\r\n        var possibleSwipeCords = this.getPossibleSwipeDragCords(scaleDiff);\r\n        var x;\r\n        var y;\r\n        var _x = offsetX - this.pageX;\r\n        var _y = offsetY - this.pageY;\r\n        if (scale - scaleDiff > 1) {\r\n            var scaleVal = (scale - scaleDiff) / Math.abs(scaleDiff);\r\n            _x =\r\n                (scaleDiff < 0 ? -_x : _x) +\r\n                    this.left * (scaleVal + (scaleDiff < 0 ? -1 : 1));\r\n            _y =\r\n                (scaleDiff < 0 ? -_y : _y) +\r\n                    this.top * (scaleVal + (scaleDiff < 0 ? -1 : 1));\r\n            x = _x / scaleVal;\r\n            y = _y / scaleVal;\r\n        }\r\n        else {\r\n            var scaleVal = (scale - scaleDiff) * scaleDiff;\r\n            x = _x * scaleVal;\r\n            y = _y * scaleVal;\r\n        }\r\n        if (reposition) {\r\n            if (allowX) {\r\n                if (this.isBeyondPossibleLeft(x, possibleSwipeCords.minX)) {\r\n                    x = possibleSwipeCords.minX;\r\n                }\r\n                else if (this.isBeyondPossibleRight(x, possibleSwipeCords.maxX)) {\r\n                    x = possibleSwipeCords.maxX;\r\n                }\r\n            }\r\n            else {\r\n                if (scale > 1) {\r\n                    if (x < possibleSwipeCords.minX) {\r\n                        x = possibleSwipeCords.minX;\r\n                    }\r\n                    else if (x > possibleSwipeCords.maxX) {\r\n                        x = possibleSwipeCords.maxX;\r\n                    }\r\n                }\r\n            }\r\n            // @todo fix this\r\n            if (allowY) {\r\n                if (this.isBeyondPossibleTop(y, possibleSwipeCords.minY)) {\r\n                    y = possibleSwipeCords.minY;\r\n                }\r\n                else if (this.isBeyondPossibleBottom(y, possibleSwipeCords.maxY)) {\r\n                    y = possibleSwipeCords.maxY;\r\n                }\r\n            }\r\n            else {\r\n                // If the translate value based on index of beyond the viewport, utilize the available space to prevent image being cut out\r\n                if (scale > 1) {\r\n                    //If image goes beyond viewport top, use the minim possible translate value\r\n                    if (y < possibleSwipeCords.minY) {\r\n                        y = possibleSwipeCords.minY;\r\n                    }\r\n                    else if (y > possibleSwipeCords.maxY) {\r\n                        y = possibleSwipeCords.maxY;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.setZoomStyles({\r\n            x: x,\r\n            y: y,\r\n            scale: scale,\r\n        });\r\n        this.left = x;\r\n        this.top = y;\r\n        if (resetToMax) {\r\n            this.setZoomImageSize();\r\n        }\r\n    };\r\n    Zoom.prototype.resetImageTranslate = function (index) {\r\n        if (!this.isImageSlide(index)) {\r\n            return;\r\n        }\r\n        var $image = this.core.getSlideItem(index).find('.lg-image').first();\r\n        this.imageReset = false;\r\n        $image.removeClass('reset-transition reset-transition-y reset-transition-x');\r\n        this.core.outer.removeClass('lg-actual-size');\r\n        $image.css('width', 'auto').css('height', 'auto');\r\n        setTimeout(function () {\r\n            $image.removeClass('no-transition');\r\n        }, 10);\r\n    };\r\n    Zoom.prototype.setZoomImageSize = function () {\r\n        var _this = this;\r\n        var $image = this.core\r\n            .getSlideItem(this.core.index)\r\n            .find('.lg-image')\r\n            .first();\r\n        setTimeout(function () {\r\n            var actualSizeScale = _this.getCurrentImageActualSizeScale();\r\n            if (_this.scale >= actualSizeScale) {\r\n                $image.addClass('no-transition');\r\n                _this.imageReset = true;\r\n            }\r\n        }, ZOOM_TRANSITION_DURATION);\r\n        setTimeout(function () {\r\n            var actualSizeScale = _this.getCurrentImageActualSizeScale();\r\n            if (_this.scale >= actualSizeScale) {\r\n                var dragAllowedAxises = _this.getDragAllowedAxises(_this.scale);\r\n                $image\r\n                    .css('width', $image.get().naturalWidth + 'px')\r\n                    .css('height', $image.get().naturalHeight + 'px');\r\n                _this.core.outer.addClass('lg-actual-size');\r\n                if (dragAllowedAxises.allowX && dragAllowedAxises.allowY) {\r\n                    $image.addClass('reset-transition');\r\n                }\r\n                else if (dragAllowedAxises.allowX &&\r\n                    !dragAllowedAxises.allowY) {\r\n                    $image.addClass('reset-transition-x');\r\n                }\r\n                else if (!dragAllowedAxises.allowX &&\r\n                    dragAllowedAxises.allowY) {\r\n                    $image.addClass('reset-transition-y');\r\n                }\r\n            }\r\n        }, ZOOM_TRANSITION_DURATION + 50);\r\n    };\r\n    /**\r\n     * @desc apply scale3d to image and translate to image wrap\r\n     * @param {style} X,Y and scale\r\n     */\r\n    Zoom.prototype.setZoomStyles = function (style) {\r\n        var $imageWrap = this.core\r\n            .getSlideItem(this.core.index)\r\n            .find('.lg-img-wrap')\r\n            .first();\r\n        var $image = this.core\r\n            .getSlideItem(this.core.index)\r\n            .find('.lg-image')\r\n            .first();\r\n        var $dummyImage = this.core.outer\r\n            .find('.lg-current .lg-dummy-img')\r\n            .first();\r\n        this.scale = style.scale;\r\n        $image.css('transform', 'scale3d(' + style.scale + ', ' + style.scale + ', 1)');\r\n        $dummyImage.css('transform', 'scale3d(' + style.scale + ', ' + style.scale + ', 1)');\r\n        var transform = 'translate3d(' + style.x + 'px, ' + style.y + 'px, 0)';\r\n        $imageWrap.css('transform', transform);\r\n    };\r\n    /**\r\n     * @param index - Index of the current slide\r\n     * @param event - event will be available only if the function is called on clicking/taping the imags\r\n     */\r\n    Zoom.prototype.setActualSize = function (index, event) {\r\n        var _this = this;\r\n        if (this.zoomInProgress) {\r\n            return;\r\n        }\r\n        this.zoomInProgress = true;\r\n        var currentItem = this.core.galleryItems[this.core.index];\r\n        this.resetImageTranslate(index);\r\n        setTimeout(function () {\r\n            // Allow zoom only on image\r\n            if (!currentItem.src ||\r\n                _this.core.outer.hasClass('lg-first-slide-loading')) {\r\n                return;\r\n            }\r\n            var scale = _this.getCurrentImageActualSizeScale();\r\n            var prevScale = _this.scale;\r\n            if (_this.core.outer.hasClass('lg-zoomed')) {\r\n                _this.scale = 1;\r\n            }\r\n            else {\r\n                _this.scale = _this.getScale(scale);\r\n            }\r\n            _this.setPageCords(event);\r\n            _this.beginZoom(_this.scale);\r\n            _this.zoomImage(_this.scale, _this.scale - prevScale, true, true);\r\n        }, 50);\r\n        setTimeout(function () {\r\n            _this.core.outer.removeClass('lg-grabbing').addClass('lg-grab');\r\n        }, 60);\r\n        setTimeout(function () {\r\n            _this.zoomInProgress = false;\r\n        }, ZOOM_TRANSITION_DURATION + 110);\r\n    };\r\n    Zoom.prototype.getNaturalWidth = function (index) {\r\n        var $image = this.core.getSlideItem(index).find('.lg-image').first();\r\n        var naturalWidth = this.core.galleryItems[index].width;\r\n        return naturalWidth\r\n            ? parseFloat(naturalWidth)\r\n            : $image.get().naturalWidth;\r\n    };\r\n    Zoom.prototype.getActualSizeScale = function (naturalWidth, width) {\r\n        var _scale;\r\n        var scale;\r\n        if (naturalWidth >= width) {\r\n            _scale = naturalWidth / width;\r\n            scale = _scale || 2;\r\n        }\r\n        else {\r\n            scale = 1;\r\n        }\r\n        return scale;\r\n    };\r\n    Zoom.prototype.getCurrentImageActualSizeScale = function () {\r\n        var $image = this.core\r\n            .getSlideItem(this.core.index)\r\n            .find('.lg-image')\r\n            .first();\r\n        var width = $image.get().offsetWidth;\r\n        var naturalWidth = this.getNaturalWidth(this.core.index) || width;\r\n        return this.getActualSizeScale(naturalWidth, width);\r\n    };\r\n    Zoom.prototype.getPageCords = function (event) {\r\n        var cords = {};\r\n        if (event) {\r\n            cords.x = event.pageX || event.touches[0].pageX;\r\n            cords.y = event.pageY || event.touches[0].pageY;\r\n        }\r\n        else {\r\n            var containerRect = this.core.$content\r\n                .get()\r\n                .getBoundingClientRect();\r\n            cords.x = containerRect.width / 2 + containerRect.left;\r\n            cords.y =\r\n                containerRect.height / 2 + this.scrollTop + containerRect.top;\r\n        }\r\n        return cords;\r\n    };\r\n    Zoom.prototype.setPageCords = function (event) {\r\n        var pageCords = this.getPageCords(event);\r\n        this.pageX = pageCords.x;\r\n        this.pageY = pageCords.y;\r\n    };\r\n    Zoom.prototype.manageActualPixelClassNames = function () {\r\n        var $actualSize = this.core.getElementById('lg-actual-size');\r\n        $actualSize\r\n            .removeClass(this.settings.actualSizeIcons.zoomIn)\r\n            .addClass(this.settings.actualSizeIcons.zoomOut);\r\n    };\r\n    // If true, zoomed - in else zoomed out\r\n    Zoom.prototype.beginZoom = function (scale) {\r\n        this.core.outer.removeClass('lg-zoom-drag-transition lg-zoom-dragging');\r\n        if (scale > 1) {\r\n            this.core.outer.addClass('lg-zoomed');\r\n            this.manageActualPixelClassNames();\r\n        }\r\n        else {\r\n            this.resetZoom();\r\n        }\r\n        return scale > 1;\r\n    };\r\n    Zoom.prototype.getScale = function (scale) {\r\n        var actualSizeScale = this.getCurrentImageActualSizeScale();\r\n        if (scale < 1) {\r\n            scale = 1;\r\n        }\r\n        else if (scale > actualSizeScale) {\r\n            scale = actualSizeScale;\r\n        }\r\n        return scale;\r\n    };\r\n    Zoom.prototype.init = function () {\r\n        var _this = this;\r\n        if (!this.settings.zoom) {\r\n            return;\r\n        }\r\n        this.buildTemplates();\r\n        this.enableZoomOnSlideItemLoad();\r\n        var tapped = null;\r\n        this.core.outer.on('dblclick.lg', function (event) {\r\n            if (!_this.$LG(event.target).hasClass('lg-image')) {\r\n                return;\r\n            }\r\n            _this.setActualSize(_this.core.index, event);\r\n        });\r\n        this.core.outer.on('touchstart.lg', function (event) {\r\n            var $target = _this.$LG(event.target);\r\n            if (event.touches.length === 1 && $target.hasClass('lg-image')) {\r\n                if (!tapped) {\r\n                    tapped = setTimeout(function () {\r\n                        tapped = null;\r\n                    }, 300);\r\n                }\r\n                else {\r\n                    clearTimeout(tapped);\r\n                    tapped = null;\r\n                    event.preventDefault();\r\n                    _this.setActualSize(_this.core.index, event);\r\n                }\r\n            }\r\n        });\r\n        this.core.LGel.on(lGEvents.containerResize + \".zoom \" + lGEvents.rotateRight + \".zoom \" + lGEvents.rotateLeft + \".zoom \" + lGEvents.flipHorizontal + \".zoom \" + lGEvents.flipVertical + \".zoom\", function () {\r\n            if (!_this.core.lgOpened ||\r\n                !_this.isImageSlide(_this.core.index) ||\r\n                _this.core.touchAction) {\r\n                return;\r\n            }\r\n            var _LGel = _this.core\r\n                .getSlideItem(_this.core.index)\r\n                .find('.lg-img-wrap')\r\n                .first();\r\n            _this.top = 0;\r\n            _this.left = 0;\r\n            _this.setZoomEssentials();\r\n            _this.setZoomSwipeStyles(_LGel, { x: 0, y: 0 });\r\n            _this.positionChanged = true;\r\n        });\r\n        // Update zoom on resize and orientationchange\r\n        this.$LG(window).on(\"scroll.lg.zoom.global\" + this.core.lgId, function () {\r\n            if (!_this.core.lgOpened)\r\n                return;\r\n            _this.scrollTop = _this.$LG(window).scrollTop();\r\n        });\r\n        this.core.getElementById('lg-zoom-out').on('click.lg', function () {\r\n            // Allow zoom only on image\r\n            if (!_this.isImageSlide(_this.core.index)) {\r\n                return;\r\n            }\r\n            var timeout = 0;\r\n            if (_this.imageReset) {\r\n                _this.resetImageTranslate(_this.core.index);\r\n                timeout = 50;\r\n            }\r\n            setTimeout(function () {\r\n                var scale = _this.scale - _this.settings.scale;\r\n                if (scale < 1) {\r\n                    scale = 1;\r\n                }\r\n                _this.beginZoom(scale);\r\n                _this.zoomImage(scale, -_this.settings.scale, true, !_this.settings.infiniteZoom);\r\n            }, timeout);\r\n        });\r\n        this.core.getElementById('lg-zoom-in').on('click.lg', function () {\r\n            _this.zoomIn();\r\n        });\r\n        this.core.getElementById('lg-actual-size').on('click.lg', function () {\r\n            _this.setActualSize(_this.core.index);\r\n        });\r\n        this.core.LGel.on(lGEvents.beforeOpen + \".zoom\", function () {\r\n            _this.core.outer.find('.lg-item').removeClass('lg-zoomable');\r\n        });\r\n        this.core.LGel.on(lGEvents.afterOpen + \".zoom\", function () {\r\n            _this.scrollTop = _this.$LG(window).scrollTop();\r\n            // Set the initial value center\r\n            _this.pageX = _this.core.outer.width() / 2;\r\n            _this.pageY = _this.core.outer.height() / 2 + _this.scrollTop;\r\n            _this.scale = 1;\r\n        });\r\n        // Reset zoom on slide change\r\n        this.core.LGel.on(lGEvents.afterSlide + \".zoom\", function (event) {\r\n            var prevIndex = event.detail.prevIndex;\r\n            _this.scale = 1;\r\n            _this.positionChanged = false;\r\n            _this.zoomInProgress = false;\r\n            _this.resetZoom(prevIndex);\r\n            _this.resetImageTranslate(prevIndex);\r\n            if (_this.isImageSlide(_this.core.index)) {\r\n                _this.setZoomEssentials();\r\n            }\r\n        });\r\n        // Drag option after zoom\r\n        this.zoomDrag();\r\n        this.pinchZoom();\r\n        this.zoomSwipe();\r\n        // Store the zoomable timeout value just to clear it while closing\r\n        this.zoomableTimeout = false;\r\n        this.positionChanged = false;\r\n        this.zoomInProgress = false;\r\n    };\r\n    Zoom.prototype.zoomIn = function () {\r\n        // Allow zoom only on image\r\n        if (!this.isImageSlide(this.core.index)) {\r\n            return;\r\n        }\r\n        var scale = this.scale + this.settings.scale;\r\n        if (!this.settings.infiniteZoom) {\r\n            scale = this.getScale(scale);\r\n        }\r\n        this.beginZoom(scale);\r\n        this.zoomImage(scale, Math.min(this.settings.scale, scale - this.scale), true, !this.settings.infiniteZoom);\r\n    };\r\n    // Reset zoom effect\r\n    Zoom.prototype.resetZoom = function (index) {\r\n        this.core.outer.removeClass('lg-zoomed lg-zoom-drag-transition');\r\n        var $actualSize = this.core.getElementById('lg-actual-size');\r\n        var $item = this.core.getSlideItem(index !== undefined ? index : this.core.index);\r\n        $actualSize\r\n            .removeClass(this.settings.actualSizeIcons.zoomOut)\r\n            .addClass(this.settings.actualSizeIcons.zoomIn);\r\n        $item.find('.lg-img-wrap').first().removeAttr('style');\r\n        $item.find('.lg-image').first().removeAttr('style');\r\n        this.scale = 1;\r\n        this.left = 0;\r\n        this.top = 0;\r\n        // Reset pagx pagy values to center\r\n        this.setPageCords();\r\n    };\r\n    Zoom.prototype.getTouchDistance = function (e) {\r\n        return Math.sqrt((e.touches[0].pageX - e.touches[1].pageX) *\r\n            (e.touches[0].pageX - e.touches[1].pageX) +\r\n            (e.touches[0].pageY - e.touches[1].pageY) *\r\n                (e.touches[0].pageY - e.touches[1].pageY));\r\n    };\r\n    Zoom.prototype.pinchZoom = function () {\r\n        var _this = this;\r\n        var startDist = 0;\r\n        var pinchStarted = false;\r\n        var initScale = 1;\r\n        var prevScale = 0;\r\n        var $item = this.core.getSlideItem(this.core.index);\r\n        this.core.outer.on('touchstart.lg', function (e) {\r\n            $item = _this.core.getSlideItem(_this.core.index);\r\n            if (!_this.isImageSlide(_this.core.index)) {\r\n                return;\r\n            }\r\n            if (e.touches.length === 2) {\r\n                e.preventDefault();\r\n                if (_this.core.outer.hasClass('lg-first-slide-loading')) {\r\n                    return;\r\n                }\r\n                initScale = _this.scale || 1;\r\n                _this.core.outer.removeClass('lg-zoom-drag-transition lg-zoom-dragging');\r\n                _this.setPageCords(e);\r\n                _this.resetImageTranslate(_this.core.index);\r\n                _this.core.touchAction = 'pinch';\r\n                startDist = _this.getTouchDistance(e);\r\n            }\r\n        });\r\n        this.core.$inner.on('touchmove.lg', function (e) {\r\n            if (e.touches.length === 2 &&\r\n                _this.core.touchAction === 'pinch' &&\r\n                (_this.$LG(e.target).hasClass('lg-item') ||\r\n                    $item.get().contains(e.target))) {\r\n                e.preventDefault();\r\n                var endDist = _this.getTouchDistance(e);\r\n                var distance = startDist - endDist;\r\n                if (!pinchStarted && Math.abs(distance) > 5) {\r\n                    pinchStarted = true;\r\n                }\r\n                if (pinchStarted) {\r\n                    prevScale = _this.scale;\r\n                    var _scale = Math.max(1, initScale + -distance * 0.02);\r\n                    _this.scale =\r\n                        Math.round((_scale + Number.EPSILON) * 100) / 100;\r\n                    var diff = _this.scale - prevScale;\r\n                    _this.zoomImage(_this.scale, Math.round((diff + Number.EPSILON) * 100) / 100, false, false);\r\n                }\r\n            }\r\n        });\r\n        this.core.$inner.on('touchend.lg', function (e) {\r\n            if (_this.core.touchAction === 'pinch' &&\r\n                (_this.$LG(e.target).hasClass('lg-item') ||\r\n                    $item.get().contains(e.target))) {\r\n                pinchStarted = false;\r\n                startDist = 0;\r\n                if (_this.scale <= 1) {\r\n                    _this.resetZoom();\r\n                }\r\n                else {\r\n                    var actualSizeScale = _this.getCurrentImageActualSizeScale();\r\n                    if (_this.scale >= actualSizeScale) {\r\n                        var scaleDiff = actualSizeScale - _this.scale;\r\n                        if (scaleDiff === 0) {\r\n                            scaleDiff = 0.01;\r\n                        }\r\n                        _this.zoomImage(actualSizeScale, scaleDiff, false, true);\r\n                    }\r\n                    _this.manageActualPixelClassNames();\r\n                    _this.core.outer.addClass('lg-zoomed');\r\n                }\r\n                _this.core.touchAction = undefined;\r\n            }\r\n        });\r\n    };\r\n    Zoom.prototype.touchendZoom = function (startCoords, endCoords, allowX, allowY, touchDuration) {\r\n        var distanceXnew = endCoords.x - startCoords.x;\r\n        var distanceYnew = endCoords.y - startCoords.y;\r\n        var speedX = Math.abs(distanceXnew) / touchDuration + 1;\r\n        var speedY = Math.abs(distanceYnew) / touchDuration + 1;\r\n        if (speedX > 2) {\r\n            speedX += 1;\r\n        }\r\n        if (speedY > 2) {\r\n            speedY += 1;\r\n        }\r\n        distanceXnew = distanceXnew * speedX;\r\n        distanceYnew = distanceYnew * speedY;\r\n        var _LGel = this.core\r\n            .getSlideItem(this.core.index)\r\n            .find('.lg-img-wrap')\r\n            .first();\r\n        var distance = {};\r\n        distance.x = this.left + distanceXnew;\r\n        distance.y = this.top + distanceYnew;\r\n        var possibleSwipeCords = this.getPossibleSwipeDragCords();\r\n        if (Math.abs(distanceXnew) > 15 || Math.abs(distanceYnew) > 15) {\r\n            if (allowY) {\r\n                if (this.isBeyondPossibleTop(distance.y, possibleSwipeCords.minY)) {\r\n                    distance.y = possibleSwipeCords.minY;\r\n                }\r\n                else if (this.isBeyondPossibleBottom(distance.y, possibleSwipeCords.maxY)) {\r\n                    distance.y = possibleSwipeCords.maxY;\r\n                }\r\n            }\r\n            if (allowX) {\r\n                if (this.isBeyondPossibleLeft(distance.x, possibleSwipeCords.minX)) {\r\n                    distance.x = possibleSwipeCords.minX;\r\n                }\r\n                else if (this.isBeyondPossibleRight(distance.x, possibleSwipeCords.maxX)) {\r\n                    distance.x = possibleSwipeCords.maxX;\r\n                }\r\n            }\r\n            if (allowY) {\r\n                this.top = distance.y;\r\n            }\r\n            else {\r\n                distance.y = this.top;\r\n            }\r\n            if (allowX) {\r\n                this.left = distance.x;\r\n            }\r\n            else {\r\n                distance.x = this.left;\r\n            }\r\n            this.setZoomSwipeStyles(_LGel, distance);\r\n            this.positionChanged = true;\r\n        }\r\n    };\r\n    Zoom.prototype.getZoomSwipeCords = function (startCoords, endCoords, allowX, allowY, possibleSwipeCords) {\r\n        var distance = {};\r\n        if (allowY) {\r\n            distance.y = this.top + (endCoords.y - startCoords.y);\r\n            if (this.isBeyondPossibleTop(distance.y, possibleSwipeCords.minY)) {\r\n                var diffMinY = possibleSwipeCords.minY - distance.y;\r\n                distance.y = possibleSwipeCords.minY - diffMinY / 6;\r\n            }\r\n            else if (this.isBeyondPossibleBottom(distance.y, possibleSwipeCords.maxY)) {\r\n                var diffMaxY = distance.y - possibleSwipeCords.maxY;\r\n                distance.y = possibleSwipeCords.maxY + diffMaxY / 6;\r\n            }\r\n        }\r\n        else {\r\n            distance.y = this.top;\r\n        }\r\n        if (allowX) {\r\n            distance.x = this.left + (endCoords.x - startCoords.x);\r\n            if (this.isBeyondPossibleLeft(distance.x, possibleSwipeCords.minX)) {\r\n                var diffMinX = possibleSwipeCords.minX - distance.x;\r\n                distance.x = possibleSwipeCords.minX - diffMinX / 6;\r\n            }\r\n            else if (this.isBeyondPossibleRight(distance.x, possibleSwipeCords.maxX)) {\r\n                var difMaxX = distance.x - possibleSwipeCords.maxX;\r\n                distance.x = possibleSwipeCords.maxX + difMaxX / 6;\r\n            }\r\n        }\r\n        else {\r\n            distance.x = this.left;\r\n        }\r\n        return distance;\r\n    };\r\n    Zoom.prototype.isBeyondPossibleLeft = function (x, minX) {\r\n        return x >= minX;\r\n    };\r\n    Zoom.prototype.isBeyondPossibleRight = function (x, maxX) {\r\n        return x <= maxX;\r\n    };\r\n    Zoom.prototype.isBeyondPossibleTop = function (y, minY) {\r\n        return y >= minY;\r\n    };\r\n    Zoom.prototype.isBeyondPossibleBottom = function (y, maxY) {\r\n        return y <= maxY;\r\n    };\r\n    Zoom.prototype.isImageSlide = function (index) {\r\n        var currentItem = this.core.galleryItems[index];\r\n        return this.core.getSlideType(currentItem) === 'image';\r\n    };\r\n    Zoom.prototype.getPossibleSwipeDragCords = function (scale) {\r\n        var $image = this.core\r\n            .getSlideItem(this.core.index)\r\n            .find('.lg-image')\r\n            .first();\r\n        var bottom = this.core.mediaContainerPosition.bottom;\r\n        var imgRect = $image.get().getBoundingClientRect();\r\n        var imageHeight = imgRect.height;\r\n        var imageWidth = imgRect.width;\r\n        if (scale) {\r\n            imageHeight = imageHeight + scale * imageHeight;\r\n            imageWidth = imageWidth + scale * imageWidth;\r\n        }\r\n        var minY = (imageHeight - this.containerRect.height) / 2;\r\n        var maxY = (this.containerRect.height - imageHeight) / 2 + bottom;\r\n        var minX = (imageWidth - this.containerRect.width) / 2;\r\n        var maxX = (this.containerRect.width - imageWidth) / 2;\r\n        var possibleSwipeCords = {\r\n            minY: minY,\r\n            maxY: maxY,\r\n            minX: minX,\r\n            maxX: maxX,\r\n        };\r\n        return possibleSwipeCords;\r\n    };\r\n    Zoom.prototype.setZoomSwipeStyles = function (LGel, distance) {\r\n        LGel.css('transform', 'translate3d(' + distance.x + 'px, ' + distance.y + 'px, 0)');\r\n    };\r\n    Zoom.prototype.zoomSwipe = function () {\r\n        var _this = this;\r\n        var startCoords = {};\r\n        var endCoords = {};\r\n        var isMoved = false;\r\n        // Allow x direction drag\r\n        var allowX = false;\r\n        // Allow Y direction drag\r\n        var allowY = false;\r\n        var startTime = new Date();\r\n        var endTime = new Date();\r\n        var possibleSwipeCords;\r\n        var _LGel;\r\n        var $item = this.core.getSlideItem(this.core.index);\r\n        this.core.$inner.on('touchstart.lg', function (e) {\r\n            // Allow zoom only on image\r\n            if (!_this.isImageSlide(_this.core.index)) {\r\n                return;\r\n            }\r\n            $item = _this.core.getSlideItem(_this.core.index);\r\n            if ((_this.$LG(e.target).hasClass('lg-item') ||\r\n                $item.get().contains(e.target)) &&\r\n                e.touches.length === 1 &&\r\n                _this.core.outer.hasClass('lg-zoomed')) {\r\n                e.preventDefault();\r\n                startTime = new Date();\r\n                _this.core.touchAction = 'zoomSwipe';\r\n                _LGel = _this.core\r\n                    .getSlideItem(_this.core.index)\r\n                    .find('.lg-img-wrap')\r\n                    .first();\r\n                var dragAllowedAxises = _this.getDragAllowedAxises(0);\r\n                allowY = dragAllowedAxises.allowY;\r\n                allowX = dragAllowedAxises.allowX;\r\n                if (allowX || allowY) {\r\n                    startCoords = _this.getSwipeCords(e);\r\n                }\r\n                possibleSwipeCords = _this.getPossibleSwipeDragCords();\r\n                // reset opacity and transition duration\r\n                _this.core.outer.addClass('lg-zoom-dragging lg-zoom-drag-transition');\r\n            }\r\n        });\r\n        this.core.$inner.on('touchmove.lg', function (e) {\r\n            if (e.touches.length === 1 &&\r\n                _this.core.touchAction === 'zoomSwipe' &&\r\n                (_this.$LG(e.target).hasClass('lg-item') ||\r\n                    $item.get().contains(e.target))) {\r\n                e.preventDefault();\r\n                _this.core.touchAction = 'zoomSwipe';\r\n                endCoords = _this.getSwipeCords(e);\r\n                var distance = _this.getZoomSwipeCords(startCoords, endCoords, allowX, allowY, possibleSwipeCords);\r\n                if (Math.abs(endCoords.x - startCoords.x) > 15 ||\r\n                    Math.abs(endCoords.y - startCoords.y) > 15) {\r\n                    isMoved = true;\r\n                    _this.setZoomSwipeStyles(_LGel, distance);\r\n                }\r\n            }\r\n        });\r\n        this.core.$inner.on('touchend.lg', function (e) {\r\n            if (_this.core.touchAction === 'zoomSwipe' &&\r\n                (_this.$LG(e.target).hasClass('lg-item') ||\r\n                    $item.get().contains(e.target))) {\r\n                e.preventDefault();\r\n                _this.core.touchAction = undefined;\r\n                _this.core.outer.removeClass('lg-zoom-dragging');\r\n                if (!isMoved) {\r\n                    return;\r\n                }\r\n                isMoved = false;\r\n                endTime = new Date();\r\n                var touchDuration = endTime.valueOf() - startTime.valueOf();\r\n                _this.touchendZoom(startCoords, endCoords, allowX, allowY, touchDuration);\r\n            }\r\n        });\r\n    };\r\n    Zoom.prototype.zoomDrag = function () {\r\n        var _this = this;\r\n        var startCoords = {};\r\n        var endCoords = {};\r\n        var isDragging = false;\r\n        var isMoved = false;\r\n        // Allow x direction drag\r\n        var allowX = false;\r\n        // Allow Y direction drag\r\n        var allowY = false;\r\n        var startTime;\r\n        var endTime;\r\n        var possibleSwipeCords;\r\n        var _LGel;\r\n        this.core.outer.on('mousedown.lg.zoom', function (e) {\r\n            // Allow zoom only on image\r\n            if (!_this.isImageSlide(_this.core.index)) {\r\n                return;\r\n            }\r\n            var $item = _this.core.getSlideItem(_this.core.index);\r\n            if (_this.$LG(e.target).hasClass('lg-item') ||\r\n                $item.get().contains(e.target)) {\r\n                startTime = new Date();\r\n                _LGel = _this.core\r\n                    .getSlideItem(_this.core.index)\r\n                    .find('.lg-img-wrap')\r\n                    .first();\r\n                var dragAllowedAxises = _this.getDragAllowedAxises(0);\r\n                allowY = dragAllowedAxises.allowY;\r\n                allowX = dragAllowedAxises.allowX;\r\n                if (_this.core.outer.hasClass('lg-zoomed')) {\r\n                    if (_this.$LG(e.target).hasClass('lg-object') &&\r\n                        (allowX || allowY)) {\r\n                        e.preventDefault();\r\n                        startCoords = _this.getDragCords(e);\r\n                        possibleSwipeCords = _this.getPossibleSwipeDragCords();\r\n                        isDragging = true;\r\n                        _this.core.outer\r\n                            .removeClass('lg-grab')\r\n                            .addClass('lg-grabbing lg-zoom-drag-transition lg-zoom-dragging');\r\n                        // reset opacity and transition duration\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        this.$LG(window).on(\"mousemove.lg.zoom.global\" + this.core.lgId, function (e) {\r\n            if (isDragging) {\r\n                isMoved = true;\r\n                endCoords = _this.getDragCords(e);\r\n                var distance = _this.getZoomSwipeCords(startCoords, endCoords, allowX, allowY, possibleSwipeCords);\r\n                _this.setZoomSwipeStyles(_LGel, distance);\r\n            }\r\n        });\r\n        this.$LG(window).on(\"mouseup.lg.zoom.global\" + this.core.lgId, function (e) {\r\n            if (isDragging) {\r\n                endTime = new Date();\r\n                isDragging = false;\r\n                _this.core.outer.removeClass('lg-zoom-dragging');\r\n                // Fix for chrome mouse move on click\r\n                if (isMoved &&\r\n                    (startCoords.x !== endCoords.x ||\r\n                        startCoords.y !== endCoords.y)) {\r\n                    endCoords = _this.getDragCords(e);\r\n                    var touchDuration = endTime.valueOf() - startTime.valueOf();\r\n                    _this.touchendZoom(startCoords, endCoords, allowX, allowY, touchDuration);\r\n                }\r\n                isMoved = false;\r\n            }\r\n            _this.core.outer.removeClass('lg-grabbing').addClass('lg-grab');\r\n        });\r\n    };\r\n    Zoom.prototype.closeGallery = function () {\r\n        this.resetZoom();\r\n        this.zoomInProgress = false;\r\n    };\r\n    Zoom.prototype.destroy = function () {\r\n        // Unbind all events added by lightGallery zoom plugin\r\n        this.$LG(window).off(\".lg.zoom.global\" + this.core.lgId);\r\n        this.core.LGel.off('.lg.zoom');\r\n        this.core.LGel.off('.zoom');\r\n        clearTimeout(this.zoomableTimeout);\r\n        this.zoomableTimeout = false;\r\n    };\r\n    return Zoom;\r\n}());\n\nexport default Zoom;\n//# sourceMappingURL=lg-zoom.es5.js.map\n","/*!\n * lightgallery | 2.9.0 | October 1st 2025\n * http://www.lightgalleryjs.com/\n * Copyright (c) 2020 Sachin Neravath;\n * @license GPLv3\n */\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar thumbnailsSettings = {\r\n    thumbnail: true,\r\n    animateThumb: true,\r\n    currentPagerPosition: 'middle',\r\n    alignThumbnails: 'middle',\r\n    thumbWidth: 100,\r\n    thumbHeight: '80px',\r\n    thumbMargin: 5,\r\n    appendThumbnailsTo: '.lg-components',\r\n    toggleThumb: false,\r\n    enableThumbDrag: true,\r\n    enableThumbSwipe: true,\r\n    thumbnailSwipeThreshold: 10,\r\n    loadYouTubeThumbnail: true,\r\n    youTubeThumbSize: 1,\r\n    thumbnailPluginStrings: {\r\n        toggleThumbnails: 'Toggle thumbnails',\r\n    },\r\n};\n\n/**\r\n * List of lightGallery events\r\n * All events should be documented here\r\n * Below interfaces are used to build the website documentations\r\n * */\r\nvar lGEvents = {\r\n    afterAppendSlide: 'lgAfterAppendSlide',\r\n    init: 'lgInit',\r\n    hasVideo: 'lgHasVideo',\r\n    containerResize: 'lgContainerResize',\r\n    updateSlides: 'lgUpdateSlides',\r\n    afterAppendSubHtml: 'lgAfterAppendSubHtml',\r\n    beforeOpen: 'lgBeforeOpen',\r\n    afterOpen: 'lgAfterOpen',\r\n    slideItemLoad: 'lgSlideItemLoad',\r\n    beforeSlide: 'lgBeforeSlide',\r\n    afterSlide: 'lgAfterSlide',\r\n    posterClick: 'lgPosterClick',\r\n    dragStart: 'lgDragStart',\r\n    dragMove: 'lgDragMove',\r\n    dragEnd: 'lgDragEnd',\r\n    beforeNextSlide: 'lgBeforeNextSlide',\r\n    beforePrevSlide: 'lgBeforePrevSlide',\r\n    beforeClose: 'lgBeforeClose',\r\n    afterClose: 'lgAfterClose',\r\n    rotateLeft: 'lgRotateLeft',\r\n    rotateRight: 'lgRotateRight',\r\n    flipHorizontal: 'lgFlipHorizontal',\r\n    flipVertical: 'lgFlipVertical',\r\n    autoplay: 'lgAutoplay',\r\n    autoplayStart: 'lgAutoplayStart',\r\n    autoplayStop: 'lgAutoplayStop',\r\n};\n\nvar Thumbnail = /** @class */ (function () {\r\n    function Thumbnail(instance, $LG) {\r\n        this.thumbOuterWidth = 0;\r\n        this.thumbTotalWidth = 0;\r\n        this.translateX = 0;\r\n        this.thumbClickable = false;\r\n        // get lightGallery core plugin instance\r\n        this.core = instance;\r\n        this.$LG = $LG;\r\n        return this;\r\n    }\r\n    Thumbnail.prototype.init = function () {\r\n        // extend module default settings with lightGallery core settings\r\n        this.settings = __assign(__assign({}, thumbnailsSettings), this.core.settings);\r\n        this.thumbOuterWidth = 0;\r\n        this.thumbTotalWidth =\r\n            this.core.galleryItems.length *\r\n                (this.settings.thumbWidth + this.settings.thumbMargin);\r\n        // Thumbnail animation value\r\n        this.translateX = 0;\r\n        this.setAnimateThumbStyles();\r\n        if (!this.core.settings.allowMediaOverlap) {\r\n            this.settings.toggleThumb = false;\r\n        }\r\n        if (this.settings.thumbnail) {\r\n            this.build();\r\n            if (this.settings.animateThumb) {\r\n                if (this.settings.enableThumbDrag) {\r\n                    this.enableThumbDrag();\r\n                }\r\n                if (this.settings.enableThumbSwipe) {\r\n                    this.enableThumbSwipe();\r\n                }\r\n                this.thumbClickable = false;\r\n            }\r\n            else {\r\n                this.thumbClickable = true;\r\n            }\r\n            this.toggleThumbBar();\r\n            this.thumbKeyPress();\r\n        }\r\n    };\r\n    Thumbnail.prototype.build = function () {\r\n        var _this = this;\r\n        this.setThumbMarkup();\r\n        this.manageActiveClassOnSlideChange();\r\n        this.$lgThumb.first().on('click.lg touchend.lg', function (e) {\r\n            var $target = _this.$LG(e.target);\r\n            if (!$target.hasAttribute('data-lg-item-id')) {\r\n                return;\r\n            }\r\n            setTimeout(function () {\r\n                // In IE9 and bellow touch does not support\r\n                // Go to slide if browser does not support css transitions\r\n                if (_this.thumbClickable && !_this.core.lgBusy) {\r\n                    var index = parseInt($target.attr('data-lg-item-id'));\r\n                    _this.core.slide(index, false, true, false);\r\n                }\r\n            }, 50);\r\n        });\r\n        this.core.LGel.on(lGEvents.beforeSlide + \".thumb\", function (event) {\r\n            var index = event.detail.index;\r\n            _this.animateThumb(index);\r\n        });\r\n        this.core.LGel.on(lGEvents.beforeOpen + \".thumb\", function () {\r\n            _this.thumbOuterWidth = _this.core.outer.get().offsetWidth;\r\n        });\r\n        this.core.LGel.on(lGEvents.updateSlides + \".thumb\", function () {\r\n            _this.rebuildThumbnails();\r\n        });\r\n        this.core.LGel.on(lGEvents.containerResize + \".thumb\", function () {\r\n            if (!_this.core.lgOpened)\r\n                return;\r\n            setTimeout(function () {\r\n                _this.thumbOuterWidth = _this.core.outer.get().offsetWidth;\r\n                _this.animateThumb(_this.core.index);\r\n                _this.thumbOuterWidth = _this.core.outer.get().offsetWidth;\r\n            }, 50);\r\n        });\r\n    };\r\n    Thumbnail.prototype.setThumbMarkup = function () {\r\n        var thumbOuterClassNames = 'lg-thumb-outer ';\r\n        if (this.settings.alignThumbnails) {\r\n            thumbOuterClassNames += \"lg-thumb-align-\" + this.settings.alignThumbnails;\r\n        }\r\n        var html = \"<div class=\\\"\" + thumbOuterClassNames + \"\\\">\\n        <div class=\\\"lg-thumb lg-group\\\">\\n        </div>\\n        </div>\";\r\n        this.core.outer.addClass('lg-has-thumb');\r\n        if (this.settings.appendThumbnailsTo === '.lg-components') {\r\n            this.core.$lgComponents.append(html);\r\n        }\r\n        else {\r\n            this.core.outer.append(html);\r\n        }\r\n        this.$thumbOuter = this.core.outer.find('.lg-thumb-outer').first();\r\n        this.$lgThumb = this.core.outer.find('.lg-thumb').first();\r\n        if (this.settings.animateThumb) {\r\n            this.core.outer\r\n                .find('.lg-thumb')\r\n                .css('transition-duration', this.core.settings.speed + 'ms')\r\n                .css('width', this.thumbTotalWidth + 'px')\r\n                .css('position', 'relative');\r\n        }\r\n        this.setThumbItemHtml(this.core.galleryItems);\r\n    };\r\n    Thumbnail.prototype.enableThumbDrag = function () {\r\n        var _this = this;\r\n        var thumbDragUtils = {\r\n            cords: {\r\n                startX: 0,\r\n                endX: 0,\r\n            },\r\n            isMoved: false,\r\n            newTranslateX: 0,\r\n            startTime: new Date(),\r\n            endTime: new Date(),\r\n            touchMoveTime: 0,\r\n        };\r\n        var isDragging = false;\r\n        this.$thumbOuter.addClass('lg-grab');\r\n        this.core.outer\r\n            .find('.lg-thumb')\r\n            .first()\r\n            .on('mousedown.lg.thumb', function (e) {\r\n            if (_this.thumbTotalWidth > _this.thumbOuterWidth) {\r\n                // execute only on .lg-object\r\n                e.preventDefault();\r\n                thumbDragUtils.cords.startX = e.pageX;\r\n                thumbDragUtils.startTime = new Date();\r\n                _this.thumbClickable = false;\r\n                isDragging = true;\r\n                // ** Fix for webkit cursor issue https://code.google.com/p/chromium/issues/detail?id=26723\r\n                _this.core.outer.get().scrollLeft += 1;\r\n                _this.core.outer.get().scrollLeft -= 1;\r\n                // *\r\n                _this.$thumbOuter\r\n                    .removeClass('lg-grab')\r\n                    .addClass('lg-grabbing');\r\n            }\r\n        });\r\n        this.$LG(window).on(\"mousemove.lg.thumb.global\" + this.core.lgId, function (e) {\r\n            if (!_this.core.lgOpened)\r\n                return;\r\n            if (isDragging) {\r\n                thumbDragUtils.cords.endX = e.pageX;\r\n                thumbDragUtils = _this.onThumbTouchMove(thumbDragUtils);\r\n            }\r\n        });\r\n        this.$LG(window).on(\"mouseup.lg.thumb.global\" + this.core.lgId, function () {\r\n            if (!_this.core.lgOpened)\r\n                return;\r\n            if (thumbDragUtils.isMoved) {\r\n                thumbDragUtils = _this.onThumbTouchEnd(thumbDragUtils);\r\n            }\r\n            else {\r\n                _this.thumbClickable = true;\r\n            }\r\n            if (isDragging) {\r\n                isDragging = false;\r\n                _this.$thumbOuter.removeClass('lg-grabbing').addClass('lg-grab');\r\n            }\r\n        });\r\n    };\r\n    Thumbnail.prototype.enableThumbSwipe = function () {\r\n        var _this = this;\r\n        var thumbDragUtils = {\r\n            cords: {\r\n                startX: 0,\r\n                endX: 0,\r\n            },\r\n            isMoved: false,\r\n            newTranslateX: 0,\r\n            startTime: new Date(),\r\n            endTime: new Date(),\r\n            touchMoveTime: 0,\r\n        };\r\n        this.$lgThumb.on('touchstart.lg', function (e) {\r\n            if (_this.thumbTotalWidth > _this.thumbOuterWidth) {\r\n                e.preventDefault();\r\n                thumbDragUtils.cords.startX = e.targetTouches[0].pageX;\r\n                _this.thumbClickable = false;\r\n                thumbDragUtils.startTime = new Date();\r\n            }\r\n        });\r\n        this.$lgThumb.on('touchmove.lg', function (e) {\r\n            if (_this.thumbTotalWidth > _this.thumbOuterWidth) {\r\n                e.preventDefault();\r\n                thumbDragUtils.cords.endX = e.targetTouches[0].pageX;\r\n                thumbDragUtils = _this.onThumbTouchMove(thumbDragUtils);\r\n            }\r\n        });\r\n        this.$lgThumb.on('touchend.lg', function () {\r\n            if (thumbDragUtils.isMoved) {\r\n                thumbDragUtils = _this.onThumbTouchEnd(thumbDragUtils);\r\n            }\r\n            else {\r\n                _this.thumbClickable = true;\r\n            }\r\n        });\r\n    };\r\n    // Rebuild thumbnails\r\n    Thumbnail.prototype.rebuildThumbnails = function () {\r\n        var _this = this;\r\n        // Remove transitions\r\n        this.$thumbOuter.addClass('lg-rebuilding-thumbnails');\r\n        setTimeout(function () {\r\n            _this.thumbTotalWidth =\r\n                _this.core.galleryItems.length *\r\n                    (_this.settings.thumbWidth + _this.settings.thumbMargin);\r\n            _this.$lgThumb.css('width', _this.thumbTotalWidth + 'px');\r\n            _this.$lgThumb.empty();\r\n            _this.setThumbItemHtml(_this.core.galleryItems);\r\n            _this.animateThumb(_this.core.index);\r\n        }, 50);\r\n        setTimeout(function () {\r\n            _this.$thumbOuter.removeClass('lg-rebuilding-thumbnails');\r\n        }, 200);\r\n    };\r\n    // @ts-check\r\n    Thumbnail.prototype.setTranslate = function (value) {\r\n        this.$lgThumb.css('transform', 'translate3d(-' + value + 'px, 0px, 0px)');\r\n    };\r\n    Thumbnail.prototype.getPossibleTransformX = function (left) {\r\n        if (left > this.thumbTotalWidth - this.thumbOuterWidth) {\r\n            left = this.thumbTotalWidth - this.thumbOuterWidth;\r\n        }\r\n        if (left < 0) {\r\n            left = 0;\r\n        }\r\n        return left;\r\n    };\r\n    Thumbnail.prototype.animateThumb = function (index) {\r\n        this.$lgThumb.css('transition-duration', this.core.settings.speed + 'ms');\r\n        if (this.settings.animateThumb) {\r\n            var position = 0;\r\n            switch (this.settings.currentPagerPosition) {\r\n                case 'left':\r\n                    position = 0;\r\n                    break;\r\n                case 'middle':\r\n                    position =\r\n                        this.thumbOuterWidth / 2 - this.settings.thumbWidth / 2;\r\n                    break;\r\n                case 'right':\r\n                    position = this.thumbOuterWidth - this.settings.thumbWidth;\r\n            }\r\n            this.translateX =\r\n                (this.settings.thumbWidth + this.settings.thumbMargin) * index -\r\n                    1 -\r\n                    position;\r\n            if (this.translateX > this.thumbTotalWidth - this.thumbOuterWidth) {\r\n                this.translateX = this.thumbTotalWidth - this.thumbOuterWidth;\r\n            }\r\n            if (this.translateX < 0) {\r\n                this.translateX = 0;\r\n            }\r\n            this.setTranslate(this.translateX);\r\n        }\r\n    };\r\n    Thumbnail.prototype.onThumbTouchMove = function (thumbDragUtils) {\r\n        thumbDragUtils.newTranslateX = this.translateX;\r\n        thumbDragUtils.isMoved = true;\r\n        thumbDragUtils.touchMoveTime = new Date().valueOf();\r\n        thumbDragUtils.newTranslateX -=\r\n            thumbDragUtils.cords.endX - thumbDragUtils.cords.startX;\r\n        thumbDragUtils.newTranslateX = this.getPossibleTransformX(thumbDragUtils.newTranslateX);\r\n        // move current slide\r\n        this.setTranslate(thumbDragUtils.newTranslateX);\r\n        this.$thumbOuter.addClass('lg-dragging');\r\n        return thumbDragUtils;\r\n    };\r\n    Thumbnail.prototype.onThumbTouchEnd = function (thumbDragUtils) {\r\n        thumbDragUtils.isMoved = false;\r\n        thumbDragUtils.endTime = new Date();\r\n        this.$thumbOuter.removeClass('lg-dragging');\r\n        var touchDuration = thumbDragUtils.endTime.valueOf() -\r\n            thumbDragUtils.startTime.valueOf();\r\n        var distanceXnew = thumbDragUtils.cords.endX - thumbDragUtils.cords.startX;\r\n        var speedX = Math.abs(distanceXnew) / touchDuration;\r\n        // Some magical numbers\r\n        // Can be improved\r\n        if (speedX > 0.15 &&\r\n            thumbDragUtils.endTime.valueOf() - thumbDragUtils.touchMoveTime < 30) {\r\n            speedX += 1;\r\n            if (speedX > 2) {\r\n                speedX += 1;\r\n            }\r\n            speedX =\r\n                speedX +\r\n                    speedX * (Math.abs(distanceXnew) / this.thumbOuterWidth);\r\n            this.$lgThumb.css('transition-duration', Math.min(speedX - 1, 2) + 'settings');\r\n            distanceXnew = distanceXnew * speedX;\r\n            this.translateX = this.getPossibleTransformX(this.translateX - distanceXnew);\r\n            this.setTranslate(this.translateX);\r\n        }\r\n        else {\r\n            this.translateX = thumbDragUtils.newTranslateX;\r\n        }\r\n        if (Math.abs(thumbDragUtils.cords.endX - thumbDragUtils.cords.startX) <\r\n            this.settings.thumbnailSwipeThreshold) {\r\n            this.thumbClickable = true;\r\n        }\r\n        return thumbDragUtils;\r\n    };\r\n    Thumbnail.prototype.getThumbHtml = function (thumb, index, alt) {\r\n        var slideVideoInfo = this.core.galleryItems[index].__slideVideoInfo || {};\r\n        var thumbImg;\r\n        if (slideVideoInfo.youtube) {\r\n            if (this.settings.loadYouTubeThumbnail) {\r\n                thumbImg =\r\n                    '//img.youtube.com/vi/' +\r\n                        slideVideoInfo.youtube[1] +\r\n                        '/' +\r\n                        this.settings.youTubeThumbSize +\r\n                        '.jpg';\r\n            }\r\n            else {\r\n                thumbImg = thumb;\r\n            }\r\n        }\r\n        else {\r\n            thumbImg = thumb;\r\n        }\r\n        var div = document.createElement('div');\r\n        div.setAttribute('data-lg-item-id', index + '');\r\n        div.className = \"lg-thumb-item \" + (index === this.core.index ? 'active' : '');\r\n        div.style.cssText = \"width: \" + this.settings.thumbWidth + \"px; height: \" + this.settings.thumbHeight + \"; margin-right: \" + this.settings.thumbMargin + \"px;\";\r\n        var img = document.createElement('img');\r\n        img.alt = alt || '';\r\n        img.setAttribute('data-lg-item-id', index + '');\r\n        img.src = thumbImg;\r\n        div.appendChild(img);\r\n        return div;\r\n    };\r\n    Thumbnail.prototype.setThumbItemHtml = function (items) {\r\n        for (var i = 0; i < items.length; i++) {\r\n            var thumb = this.getThumbHtml(items[i].thumb, i, items[i].alt);\r\n            this.$lgThumb.append(thumb);\r\n        }\r\n    };\r\n    Thumbnail.prototype.setAnimateThumbStyles = function () {\r\n        if (this.settings.animateThumb) {\r\n            this.core.outer.addClass('lg-animate-thumb');\r\n        }\r\n    };\r\n    // Manage thumbnail active calss\r\n    Thumbnail.prototype.manageActiveClassOnSlideChange = function () {\r\n        var _this = this;\r\n        // manage active class for thumbnail\r\n        this.core.LGel.on(lGEvents.beforeSlide + \".thumb\", function (event) {\r\n            var $thumb = _this.core.outer.find('.lg-thumb-item');\r\n            var index = event.detail.index;\r\n            $thumb.removeClass('active');\r\n            $thumb.eq(index).addClass('active');\r\n        });\r\n    };\r\n    // Toggle thumbnail bar\r\n    Thumbnail.prototype.toggleThumbBar = function () {\r\n        var _this = this;\r\n        if (this.settings.toggleThumb) {\r\n            this.core.outer.addClass('lg-can-toggle');\r\n            this.core.$toolbar.append('<button type=\"button\" aria-label=\"' +\r\n                this.settings.thumbnailPluginStrings['toggleThumbnails'] +\r\n                '\" class=\"lg-toggle-thumb lg-icon\"></button>');\r\n            this.core.outer\r\n                .find('.lg-toggle-thumb')\r\n                .first()\r\n                .on('click.lg', function () {\r\n                _this.core.outer.toggleClass('lg-components-open');\r\n            });\r\n        }\r\n    };\r\n    Thumbnail.prototype.thumbKeyPress = function () {\r\n        var _this = this;\r\n        this.$LG(window).on(\"keydown.lg.thumb.global\" + this.core.lgId, function (e) {\r\n            if (!_this.core.lgOpened || !_this.settings.toggleThumb)\r\n                return;\r\n            if (e.keyCode === 38) {\r\n                e.preventDefault();\r\n                _this.core.outer.addClass('lg-components-open');\r\n            }\r\n            else if (e.keyCode === 40) {\r\n                e.preventDefault();\r\n                _this.core.outer.removeClass('lg-components-open');\r\n            }\r\n        });\r\n    };\r\n    Thumbnail.prototype.destroy = function () {\r\n        if (this.settings.thumbnail) {\r\n            this.$LG(window).off(\".lg.thumb.global\" + this.core.lgId);\r\n            this.core.LGel.off('.lg.thumb');\r\n            this.core.LGel.off('.thumb');\r\n            this.$thumbOuter.remove();\r\n            this.core.outer.removeClass('lg-has-thumb');\r\n        }\r\n    };\r\n    return Thumbnail;\r\n}());\n\nexport default Thumbnail;\n//# sourceMappingURL=lg-thumbnail.es5.js.map\n"],"names":["__assign","s","n","p","__spreadArrays","i","il","r","k","a","j","jl","lGEvents","lightGalleryCoreSettings","initLgPolyfills","CustomEvent","event","params","evt","lgQuery","selector","c","v","context","fl","func","el","cssProperty","value","property","group1","eventName","eventNamespace","e","attr","$LG","index","attributes","attrs","className","wrapper","classNames","attribute","_this","events","listener","detail","customEvent","url","res","html","scrollTop","scrollLeft","rect","bodyMarginLeft","style","defaultDynamicOptions","convertToData","g","utils","element","insertMethod","response","htmlContent","contentDiv","container","spacing","defaultLgSize","LGel","lgSize","isResponsiveSizes","wWidth","size_1","responsiveWidth","size","width","height","cWidth","cHeight","maxWidth","maxHeight","ratio","top","bottom","imageSize","containerRect","wHeight","elWidth","elHeight","elStyle","x","y","scX","scY","transform","iframeWidth","iframeHeight","iframeMaxWidth","iframeMaxHeight","src","iframeTitle","title","altAttr","srcset","sizes","sources","srcsetAttr","sizesAttr","imgMarkup","sourceTag","sourceObj","source","key","srcItms","rsWidth","rsSrc","_src","img","_poster","dummyImg","videoContStyle","playVideoString","_isVideo","videoClass","_dummy","elements","visibleElements","items","extraProps","getCaptionFromTitleOrAlt","exThumbImage","dynamicElements","availableDynamicOptions","item","dynamicEl","dynamicAttr","label","currentItem","alt","thumb","isHTML5VIdeo","youtube","vimeo","wistia","lgId","LightGallery","options","mobileSettings","_loop_1","this_1","$element","uuid","currentItemIndex","plugin","id","controls","subHtmlCont","addClasses","ariaLabelledby","ariaDescribedby","containerClassName","closeIcon","maximizeIcon","template","outerClassNames","currentGalleryItem","__slideVideoInfo","_a","top_1","imgStyle","lgVideoStyle","currentSlide","currentSrc","_index","galleryItem","itemIndex","selectWithin","bodyRect","scrollbarWidth","itemsToBeInsertedToDom","timeout","currentSlide_1","subHtml","captionHeight","thumbContainer","thumbHeight","$img","counterHtml","subHtmlUrl","fL","$currentSlide","$currentItem","_dummyImgSrc","dummyImgContentImg","imgContent","picture","$slide","isHTML5VideoWithoutPoster","onLoad","onError","mediaObject","delay","speed","isFirstSlide","_speed","rec","poster","video","_html5Video","srcDyItms","videoInfo","iframe","top_2","videoSize","markup","hasStartAnimation","prevIndex","numberOfItems","possibleNumberOfItems","prevIndexItem","_element","idx","numberOfExistingItems","currentItemId","hideDownloadBtn","$download","direction","currentSlideItem","previousSlideItem","fromTouch","fromThumb","numberOfGalleryItems","previousSlideItem_1","top_3","touchPrev","touchNext","startCoords","endCoords","distanceX","distanceY","allowSwipe","slideWidthAmount","gutter","opacity","scale","distance","triggerClick","distanceAbs","target","isMoved","isSwiping","$item","isDraging","_touchNext","_touchPrev","_loop","$prev","$next","$el","xValue","yValue","scaleX","scaleY","lastCall","now","playButton","isTabPressed","focusableEls","firstFocusableEl","lastFocusableEl","mousedown","force","top_4","_b","removeTimeout","module","destroy","galleryItems","closeTimeout","lightGallery","zoomSettings","ZOOM_TRANSITION_DURATION","Zoom","instance","zoomIcons","scaleDiff","$image","allowY","allowX","reposition","resetToMax","offsetX","offsetY","originalX","originalY","dragAllowedAxises","possibleSwipeCords","_x","_y","scaleVal","actualSizeScale","$imageWrap","$dummyImage","prevScale","naturalWidth","_scale","cords","pageCords","$actualSize","tapped","$target","_LGel","startDist","pinchStarted","initScale","endDist","diff","touchDuration","distanceXnew","distanceYnew","speedX","speedY","diffMinY","diffMaxY","diffMinX","difMaxX","minX","maxX","minY","maxY","imgRect","imageHeight","imageWidth","startTime","endTime","isDragging","thumbnailsSettings","Thumbnail","thumbOuterClassNames","thumbDragUtils","left","position","slideVideoInfo","thumbImg","div","$thumb"],"mappings":"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","x_google_ignoreList":[0,1,2]}